
<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Developing the First Example Program Running on Hi3861 &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="developing-the-first-example-program-running-on-hi3861">
<h1>Developing the First Example Program Running on Hi3861<a class="headerlink" href="#developing-the-first-example-program-running-on-hi3861" title="Permalink to this headline">¶</a></h1>
<p>This example shows how to use attention (AT) commands to complete WLAN
module networking.</p>
<div class="section" id="acquiring-source-code">
<h2>Acquiring Source Code<a class="headerlink" href="#acquiring-source-code" title="Permalink to this headline">¶</a></h2>
<p>You need to acquire <a class="reference external" href="https://repo.huaweicloud.com/harmonyos/os/1.0/code-1.0.tar.gz">Hi3861 source
code</a>
and download it on a Linux server. For more methods, see <a class="reference external" href="../get-code/source-code-acquisition.md">Source Code
Acquisition</a>.</p>
</div>
<div class="section" id="compiling-source-code">
<h2>Compiling Source Code<a class="headerlink" href="#compiling-source-code" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to compile the WLAN module on a Linux server.</p>
<ol class="arabic">
<li><p>Use the OpenHarmony IDE DevEco to connect to a Linux server. (The IDE
DevEco integrates the capabilities of terminal tools. For details
about how to use the tool, see <a class="reference external" href="https://device.harmonyos.com/en/docs/ide/user-guides/service_introduction-0000001050166905">User
Guide</a>.)</p>
<p>Click <strong>View</strong> and then <strong>Terminal</strong> to start the IDE terminal tool.</p>
<p><strong>Figure 1</strong> Starting the IDE terminal tool</p>
<p><img alt="image1" src="../_images/en-us_image_0000001055040538.png" /></p>
<p>On the TERMINAL page, run the ssh command, for example, **ssh
<em>user</em>&#64;_ipaddr_**, to connect to the Linux server.</p>
<p><strong>Figure 2</strong> TERMINAL page</p>
<p><img alt="image2" src="../_images/en-us_image_0000001054599199.png" /></p>
</li>
<li><p>Go to the root directory of the code and run the <strong>python build.py
wifiiot</strong> command in the TERMINAL page to start compilation.</p>
<p><strong>Figure 3</strong> Running the compilation command on TERMINAL page</p>
<p><img alt="image3" src="../_images/en-us_image_0000001055040596.png" /></p>
</li>
<li><p>Check whether the building is successful. If yes, <strong>BUILD SUCCESS</strong>
will be displayed, as shown in the following figure.</p>
<div class="line-block">
<div class="line"><strong>Figure 4</strong> Successful building</div>
<div class="line"><img alt="image4" src="../_images/successful-building.png" /></div>
</div>
</li>
<li><p>Check whether the following files are generated in the
<strong>out/wifiiot</strong> directory.</p>
<p><strong>Figure 5</strong> Directory for storing compilation files</p>
<p><img alt="image5" src="../_images/en-us_image_0000001055040654.png" /></p>
</li>
</ol>
</div>
<div class="section" id="burning-images">
<h2>Burning Images<a class="headerlink" href="#burning-images" title="Permalink to this headline">¶</a></h2>
<p>You can use the DevEco tool to perform the image burning of the Hi3861
WLAN module. For details about how to use the tool, see <a class="reference external" href="https://device.harmonyos.com/en/docs/ide/user-guides/service_introduction-0000001050166905">User
Guide</a>.</p>
<ol class="arabic">
<li><p>Use a USB cable to connect to the Windows workstation and WLAN
module. (Before the connection to the WLAN module, download the
USB-to-serial driver from
<a class="reference external" href="http://www.wch.cn/search?q=ch340g&amp;t=downloads">http://www.wch.cn/search?q=ch340g&amp;t=downloads</a> and install it.) In
addition, query the COM port on the device manager, for example,
CH340 (COM11) which provides functions of code burning, log printing,
and AT commands execution.</p>
<div class="line-block">
<div class="line"><strong>Figure 6</strong> COM port of the device manager</div>
<div class="line"><img alt="image6" src="../_images/com-port-of-the-device-manager.png" /></div>
</div>
</li>
<li><p>Enter the burning configuration page.</p>
<p><strong>Figure 7</strong> Basic configurations for image burning</p>
<p><img alt="image7" src="../_images/en-us_image_0000001054877726.png" /></p>
</li>
<li><p>Configure basic parameters.</p>
<ol class="arabic simple">
<li><p>Set a proper baud rate. A higher baud rate indicates a faster
burning speed. Here <strong>921600</strong> is recommended.</p></li>
<li><p>Select a data bit. The default value of <strong>Data bit</strong> for the WLAN
module is <strong>8</strong>.</p></li>
<li><p>Select the version package path
<strong>./out/wifiiot/Hi3861_wifiiot_app_allinone.bin</strong> and <strong>Hiburn</strong>
mode.</p></li>
<li><p>Click <strong>Save</strong> to save configurations.</p></li>
</ol>
<div class="line-block">
<div class="line"><strong>Figure 8</strong> Baud rate and data bit configurations</div>
<div class="line"><img alt="image8" src="../_images/baud-rate-and-data-bit-configurations.png" /></div>
</div>
<p><strong>Figure 9</strong> Path of the burning package</p>
<p><img alt="image9" src="../_images/en-us_image_0000001055427138.png" /></p>
</li>
<li><p>On the DevEco, click <strong>Burn</strong> <img alt="image10" src="../_images/en-us_image_0000001054443694.png" /> and select the serial port
<strong>COM11</strong>.</p>
<div class="line-block">
<div class="line"><strong>Figure 10</strong> Starting a burning</div>
<div class="line"><img alt="image11" src="../_images/starting-a-burning.png" /></div>
</div>
</li>
<li><p>After the serial port is selected, <strong>Connecting, please reset
device…</strong> is shown below the <strong>TERMINAL</strong> tab, indicating that the
module is in the to-be-burnt state.</p>
<div class="line-block">
<div class="line"><strong>Figure 11</strong> Burning process</div>
<div class="line"><img alt="image12" src="../_images/burning-process.png" /></div>
</div>
</li>
<li><p>Press the <strong>Reset</strong> key on the module to start burning. <strong>Execution
Successful</strong> displayed below the <strong>TERMINAL</strong> tab indicates the
burning is complete.</p>
<p><strong>Figure 12</strong> Burning completed</p>
<p><img alt="image13" src="../_images/en-us_image_0000001054802306.png" /></p>
</li>
</ol>
</div>
<div class="section" id="connecting-wlan-module-to-the-internet">
<h2>Connecting WLAN Module to the Internet<a class="headerlink" href="#connecting-wlan-module-to-the-internet" title="Permalink to this headline">¶</a></h2>
<p>After completing version building and burning, do as follows to connect
the WLAN module to the Internet using AT commands.</p>
<blockquote>
<div><p><img alt="image14" src="../_images/icon-note5.gif" /> <strong>NOTE:</strong> - The DevEco serial port connection function is
to be launched soon, so stay tuned. - In this example, the serial
port tool IPOP is used for demonstration. You can obtain this tool
from the Internet.</p>
</div></blockquote>
<ol class="arabic">
<li><p>Use a USB cable to connect the Windows workstation to the Hi3861
development board. Ensure that the serial port to be connected is
<strong>COM11</strong>, as shown in the following figure.</p>
<p><strong>Figure 13</strong> COM port of the device manager</p>
<p><img alt="image15" src="../_images/en-us_image_0000001055268090.png" /></p>
</li>
<li><p>On the Windows workstation, use IPOP to connect to the serial port
(COM11) of the WLAN module, set the baud rate to <strong>115200</strong>, select
<strong>Newline</strong>, and ensure that the entered string ends with <strong>\rn</strong>
to avoid AT command input failures.</p>
<p><strong>Figure 14</strong> IPOP connection configuration</p>
<p><img alt="image16" src="../_images/en-us_image_0000001055427946.png" /></p>
</li>
<li><p>Reset the WLAN module. The message <strong>ready to OS start</strong> is displayed
on the terminal page, indicating that the WLAN module is started
successfully.</p>
<p><strong>Figure 15</strong> Successful resetting of the WLAN module</p>
<p><img alt="image17" src="../_images/en-us_image_0000001055148043.png" /></p>
</li>
<li><p>Run the following AT commands in sequence via the IPOP serial
terminal to start the STA mode, connect to the specified AP, and
enable Dynamic Host Configuration Protocol (DHCP).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">STARTSTA</span>                             <span class="o">-</span> <span class="n">Start</span> <span class="n">the</span> <span class="n">STA</span> <span class="n">mode</span><span class="o">.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SCAN</span>                                 <span class="o">-</span> <span class="n">Scan</span> <span class="k">for</span> <span class="n">available</span> <span class="n">APs</span><span class="o">.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SCANRESULT</span>                           <span class="o">-</span> <span class="n">Display</span> <span class="n">the</span> <span class="n">scanning</span> <span class="n">result</span><span class="o">.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CONN</span><span class="o">=</span><span class="s2">&quot;SSID&quot;</span><span class="p">,,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;PASSWORD&quot;</span>            <span class="o">-</span> <span class="n">Connect</span> <span class="n">to</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">AP</span><span class="o">.</span> <span class="p">(</span><span class="n">SSID</span> <span class="ow">and</span> <span class="n">PASSWORD</span> <span class="n">represent</span> <span class="n">the</span> <span class="n">name</span> <span class="ow">and</span> <span class="n">password</span> <span class="n">of</span> <span class="n">the</span> <span class="n">hotspot</span> <span class="n">to</span> <span class="n">be</span> <span class="n">connected</span><span class="p">,</span> <span class="n">respectively</span><span class="o">.</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">STASTAT</span>                              <span class="o">-</span> <span class="n">View</span> <span class="n">the</span> <span class="n">connection</span> <span class="n">result</span><span class="o">.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">DHCP</span><span class="o">=</span><span class="n">wlan0</span><span class="p">,</span><span class="mi">1</span>                         <span class="o">-</span> <span class="n">Request</span> <span class="n">the</span> <span class="n">IP</span> <span class="n">address</span> <span class="n">of</span> <span class="n">wlan0</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">AP</span> <span class="n">using</span> <span class="n">DHCP</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p>Check whether the WLAN module is properly connected to the gateway,
as shown in the following figure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">IFCFG</span>                                <span class="o">-</span> <span class="n">View</span> <span class="n">the</span> <span class="n">IP</span> <span class="n">address</span> <span class="n">assigned</span> <span class="n">to</span> <span class="n">an</span> <span class="n">interface</span> <span class="n">of</span> <span class="n">the</span> <span class="n">module</span><span class="o">.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">PING</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">X</span>                         <span class="o">-</span> <span class="n">Check</span> <span class="n">the</span> <span class="n">connectivity</span> <span class="n">between</span> <span class="n">the</span> <span class="n">module</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">gateway</span><span class="o">.</span> <span class="n">Replace</span> <span class="n">X</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">X</span> <span class="k">with</span> <span class="n">the</span> <span class="n">actual</span> <span class="n">gateway</span> <span class="n">address</span><span class="o">.</span>
</pre></div>
</div>
<p><strong>Figure 16</strong> Successful networking of the WLAN module</p>
<p><img alt="image18" src="../_images/en-us_image_0000001055428072.png" /></p>
</li>
</ol>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/quick-start/developing-the-first-example-program-running-on-hi3861.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
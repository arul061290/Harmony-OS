
<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Developing the First Example Program Running on Hi3516 &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="developing-the-first-example-program-running-on-hi3516">
<h1>Developing the First Example Program Running on Hi3516<a class="headerlink" href="#developing-the-first-example-program-running-on-hi3516" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to modify, compile, burn, and run the first
program, and finally print <strong>Hello OHOS!</strong> on the develop board.</p>
<div class="section" id="acquiring-source-code">
<h2>Acquiring Source Code<a class="headerlink" href="#acquiring-source-code" title="Permalink to this headline">¶</a></h2>
<p>You need to acquire <a class="reference external" href="https://repo.huaweicloud.com/harmonyos/os/1.0/code-1.0.tar.gz">Hi3516 source
code</a>
and download it on a Linux server. For more obtaining methods, see
<a class="reference external" href="../get-code/source-code-acquisition.md">Source Code Acquisition</a>.</p>
</div>
<div class="section" id="modifying-a-program">
<h2>Modifying a Program<a class="headerlink" href="#modifying-a-program" title="Permalink to this headline">¶</a></h2>
<p>The code of <strong>helloworld.c</strong> in the
<strong>applications/sample/camera/app/src</strong> directory is shown in the
following example. You can customize the content to be printed. For
example, you can change <strong>OHOS</strong> to <strong>World</strong>. You can use either C or
C++ to develop a program.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;stdio.h&gt;</span>
<span class="c1">#include &quot;los_sample.h&quot;</span>

<span class="nb">int</span> <span class="n">main</span><span class="p">(</span><span class="nb">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">************************************************</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\t\t</span><span class="s2">Hello OHOS!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">************************************************</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">);</span>

    <span class="n">LOS_Sample</span><span class="p">(</span><span class="n">g_num</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="compiling-code">
<h2>Compiling Code<a class="headerlink" href="#compiling-code" title="Permalink to this headline">¶</a></h2>
<p>On the Linux server, execute the <strong>build.py</strong> script stored in the root
directory of the source code package. The result files in the
<strong>out/ipcamera_hi3516dv300</strong> directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">build</span><span class="o">.</span><span class="n">py</span> <span class="n">ipcamera_hi3516dv300</span> <span class="o">-</span><span class="n">b</span> <span class="n">debug</span>
</pre></div>
</div>
</div>
<div class="section" id="burning-images">
<h2>Burning Images<a class="headerlink" href="#burning-images" title="Permalink to this headline">¶</a></h2>
<p>This method applies only to development boards that have network ports,
for example, the Hi3516DV300 development board. The PC and the
development board must be connected to the same network through a
network cable.</p>
<blockquote>
<div><p><img alt="image1" src="../../_images/icon-notice3.gif" /> <strong>NOTICE:</strong> If the development board fails to connect to the
PC, check whether the firewall settings are correct. For details, see
problem 2 in FAQs.</p>
</div></blockquote>
<ol class="arabic">
<li><p>Install the USB-to-serial adapter driver and obtain the serial port
number.</p>
<div class="line-block">
<div class="line"><strong>Figure 1</strong> Successful driver installation</div>
<div class="line"><img alt="image2" src="../../_images/successful-driver-installation.png" /></div>
</div>
<ol class="arabic">
<li><p>Power on the board and connect the serial port of the board to the
Windows workstation.</p></li>
<li><p>Install the driver.</p></li>
<li><p>Open <strong>Device Manager</strong>, and then check and record the port number
of <strong>Prolific USB-to-Serial Comm Port</strong>. In this example, the port
number is COM11.</p>
<p>After the driver is installed, right-click the device to uninstall
it if a yellow exclamation mark is displayed on the device icon.
After the driver is reinstalled, restart the PC as required.</p>
</li>
</ol>
</li>
<li><p>Add an IP address 192.168.1.3 in this example to the interconnected
port of the board.</p>
<div class="line-block">
<div class="line"><strong>Figure 2</strong> Adding an IP address</div>
<div class="line"><img alt="image3" src="../../_images/adding-an-ip-address.png" /></div>
</div>
<ol class="arabic simple">
<li><p>Choose <strong>Control Panel</strong> &gt; <strong>Network and Internet</strong>-&gt; <strong>Network
Connections</strong>. Right-click the network adapter connected to the
board, and choose <strong>Properties</strong> from the shortcut menu.</p></li>
<li><p>Double-click <strong>Internet Protocol Version 4 (TCP/IPv4)</strong> and
right-click <strong>Properties</strong> from the shortcut menu.</p></li>
<li><p>Set the IP address and gateway according to the preceding figure.</p></li>
<li><p>Click OK to save the configuration.</p></li>
</ol>
</li>
<li><p>Choose <strong>Board Configuration</strong> and enable the hi3516dv300 board in
the <strong>Board List</strong> area. The hi3516dv300 board will then be added to
the <strong>Board Configuration</strong> list.</p>
<div class="line-block">
<div class="line"><strong>Figure 3</strong> Adding the hi3516dv300 board</div>
<div class="line"><img alt="image4" src="../../_images/adding-the-hi3516dv300-board.png" /></div>
</div>
</li>
<li><p>Open the IDE and configure the content to burn over the network by
following the sequence in the following figure.</p>
<p><strong>Figure 4</strong> Network configuration on the IDE</p>
<p><img alt="image5" src="../../_images/ide.png" /></p>
<ol class="arabic simple">
<li><p>Choose the Hi3516dv300 board.</p></li>
<li><p>Click <strong>Burn</strong>.</p></li>
<li><p>Set <strong>Burning Mode</strong> to <strong>network</strong>.</p></li>
<li><p>Select the IP address <strong>192.168.1.3</strong> from the drop-down list
after clicking the refreshing icon.</p></li>
</ol>
</li>
<li><p>Select the flash memory type and set the burning addresses.</p>
<p><strong>Figure 5</strong> Burning parameter configuration</p>
<p><img alt="image6" src="../../_images/未命名图片2.png" /></p>
<ol class="arabic simple">
<li><p>Select <strong>emmc</strong> from the <strong>Memory Type</strong> drop-down list as the
<strong>flash memory</strong> type.</p></li>
<li><p>Click <strong>New</strong> in the <strong>Burn Files</strong> area to add three file
configuration records, fill <strong>OHOS_Image.bin</strong>, <strong>rootfs.img</strong>,
and <strong>userfs.img</strong> in the <strong>out/ipcamera_hi3516dv300</strong> directory
to File Name one by one, and set the start addresses and file
sizes according to the configuration in the preceding figure.</p></li>
<li><p>Click <strong>Save</strong>.</p></li>
<li><p>Click <strong>Burn</strong> to start burning.</p></li>
</ol>
</li>
<li><p>Click the text box on the top area of the IDE and select a serial
port number from the drop-down list, for example, COM11.</p>
<div class="line-block">
<div class="line"><strong>Figure 6</strong> Selecting the serial port that is connected to the
board</div>
<div class="line"><img alt="image7" src="../../_images/selecting-the-serial-port-that-is-connected-to-the-board.png" /></div>
</div>
</li>
<li><p>Start burning. If the following prompt message is displayed, you need
to manually power off and then restart the board.</p>
<p><strong>Figure 7</strong> Prompt message</p>
<p><img alt="image8" src="../../_images/reset2.png" /></p>
</li>
<li><p>Check that the burning is successful.</p>
<div class="line-block">
<div class="line"><strong>Figure 8</strong> Successful burning</div>
<div class="line"><img alt="image9" src="../../_images/successful-burning.png" /></div>
</div>
</li>
</ol>
</div>
<div class="section" id="running-an-image">
<h2>Running an Image<a class="headerlink" href="#running-an-image" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Connect to a serial port.</p>
<blockquote>
<div><p><img alt="image10" src="../../_images/icon-notice3.gif" /> <strong>NOTICE:</strong> If the sconnection fails, rectify the fault
by referring to problem 5 in the <a class="reference external" href="faqs-0.md">FAQs</a> section.</p>
</div></blockquote>
<p><strong>Figure 9</strong> Serial port connection</p>
<p><img alt="image11" src="../../_images/chuankou1.png" /></p>
<ol class="arabic simple">
<li><p>Click <strong>Serial port</strong> to enable it.</p></li>
<li><p>Enter the serial port number “com11” and press <strong>Enter</strong> until
<strong>hisillicon</strong> is displayed.</p></li>
<li><p>Go to step 2 if the board is started for the first time or the
startup parameters need to be modified; go to step 3 otherwise.</p></li>
</ol>
</li>
<li><p>(Mandatory when the board is started for the first time) Modify the
bootcmd and bootargs parameters of U-boot. You need to perform this
step only once if the parameters need not to be modified during the
operation. The board automatically starts after it is reset.</p>
<blockquote>
<div><p><img alt="image12" src="../../_images/icon-notice3.gif" /> <strong>NOTICE:</strong> The default waiting time in the U-boot is
2s. You can press <strong>Enter</strong> to interrupt the waiting and run the
<strong>reset</strong> command to restart the system after “hisillicon” is
displayed.</p>
</div></blockquote>
<p><strong>Table 1</strong> Parameters of the U-boot</p>
<table><thead align="left"><tr id="row1423410183818"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p623461163818"><p>Command</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p42341014388"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1623471113817"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p102341719385"><p>setenv bootcmd “mmc read 0x0 0x80000000 0x800 0x4800; go 0x80000000”;</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p92347120389"><p>Run this command to read content that has a size of 0x4800 (9 MB) and
a start address of 0x800 (1 MB) to the memory address 0x80000000.</p>
</p></td></tr><tr id="row12234912381"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p172306219392"><p>setenv bootargs “console=ttyAMA0,115200n8 root=emmc fstype=vfat
rootaddr=10 M rootsize=15 M rw”;</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p13489329396"><p>Run this command to set the output mode to serial port output, baud
rate to 115200, data bit to 8, rootfs to be mounted to the emmc
component, and file system type to vfat.</p>
</p><p id="p12481832163913"><p>rootaddr=10 M, rootsize=15 M rw indicates the start address and size
of the rootfs.img file to be burnt, respectively. The file size must
be the same as that of the compiled file in the IDE.</p>
</p></td></tr><tr id="row18234161153820"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p823417118386"><p>saveenv</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p32341616389"><p>saveenv means to save the current configuration.</p>
</p></td></tr><tr id="row192345113811"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p7235111183819"><p>reset</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p123781411114016"><p>reset means to reset the board.</p>
</p></td></tr></tbody></table><blockquote>
<div><p><img alt="image13" src="../../_images/icon-notice3.gif" /> <strong>NOTICE:</strong> <strong>go 0x80000000</strong> (optional) indicates that
the command is fixed in the startup parameters by default and the
board automatically starts after it is reset. If you want to
manually start the board, press <strong>Enter</strong> in the countdown phase
of the U-boot startup to interrupt the automatic startup.</p>
</div></blockquote>
</li>
<li><p>Run the <strong>reset</strong> command and press <strong>Enter</strong> to restart the board.
After the board is restarted, <strong>OHOS</strong> is displayed when you press
<strong>Enter</strong>.</p>
<p><strong>Figure 10</strong> System startup</p>
<p><img alt="image14" src="../../_images/qi1.png" /></p>
</li>
</ol>
</div>
<div class="section" id="running-a-program">
<h2>Running a Program<a class="headerlink" href="#running-a-program" title="Permalink to this headline">¶</a></h2>
<p>In the root directory, run the <strong>./bin/camera_app</strong> command to operate
the demo program. The following figure shows the compilation result.</p>
<p><strong>Figure 11</strong> Program started successfully</p>
<p><img alt="image15" src="../../_images/qidong.png" /></p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/docs-en/quick-start/developing-the-first-example-program-running-on-hi3516.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
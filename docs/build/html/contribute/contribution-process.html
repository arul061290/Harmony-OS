
<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contribution Process &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="contribution-process">
<h1>Contribution Process<a class="headerlink" href="#contribution-process" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="#section124971410183614">Preparations</a></p></li>
<li><p><a class="reference external" href="#section6125202333611">Downloading Code</a></p></li>
<li><p><a class="reference external" href="#section338918220422">Committing Code</a></p></li>
<li><p><a class="reference external" href="#section28261522124316">Creating a Pull Request</a></p></li>
<li><p><a class="reference external" href="#section981124754415">Building Access Control</a></p></li>
<li><p><a class="reference external" href="#section17823849145014">Reviewing Code</a></p></li>
</ul>
<div class="section" id="preparations">
<h2>Preparations<a class="headerlink" href="#preparations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Install, configure, and use Git. For details, visit
<a class="reference external" href="https://gitee.com/help/categories/43">https://gitee.com/help/categories/43</a>.</p></li>
<li><p>Register an SSH public key. For details, visit
<a class="reference external" href="https://gitee.com/help/articles/4181">https://gitee.com/help/articles/4181</a>.</p></li>
<li><p>Find the repository that you are interested in on the code hosting
platform of OpenHarmony.</p></li>
</ul>
</div>
<div class="section" id="downloading-code">
<h2>Downloading Code<a class="headerlink" href="#downloading-code" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="forking-a-code-branch-from-the-cloud">
<h2>Forking a Code Branch from the Cloud<a class="headerlink" href="#forking-a-code-branch-from-the-cloud" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Find and open the homepage of the repository.</p></li>
<li><p>Click the <strong>Fork</strong> button in the upper right corner, and create an
individual cloud fork branch as prompted.</p></li>
</ol>
</div>
<div class="section" id="downloading-the-fork-repository-to-the-local-host">
<h2>Downloading the Fork Repository to the Local Host<a class="headerlink" href="#downloading-the-fork-repository-to-the-local-host" title="Permalink to this headline">¶</a></h2>
<p>Perform the following steps to download the code in the repository to
your computer:</p>
<ol class="arabic">
<li><p>Create a local working directory.</p>
<p>A local working directory is used for searching and managing local
code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir ${your_working_dir}
</pre></div>
</div>
</li>
<li><p>Clone the remote repository to the local host.</p>
<ol class="arabic">
<li><p>Switch to the local path.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mkdir -p ${your_working_dir}
cd ${your_working_dir}
</pre></div>
</div>
</li>
<li><p>Clone the remote repository.</p>
<ul>
<li><p>You can copy the address of the remote repository on the
repository page.</p>
<p><strong>Figure 1</strong></p>
</li>
<li><p>Run the following command on the local host:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>git clone $remote_link
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="using-the-repo-tool-to-download-code-repositories-in-batches">
<h2>Using the repo Tool to Download Code Repositories in Batches<a class="headerlink" href="#using-the-repo-tool-to-download-code-repositories-in-batches" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Download the repo tool. (For details, see
<a class="reference external" href="https://gitee.com/help/articles/4316">https://gitee.com/help/articles/4316</a>.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gitee</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">oschina</span><span class="o">/</span><span class="n">repo</span><span class="o">/</span><span class="n">raw</span><span class="o">/</span><span class="n">fork_flow</span><span class="o">/</span><span class="n">repo</span><span class="o">-</span><span class="n">py3</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">repo</span>
<span class="n">chmod</span> <span class="n">a</span><span class="o">+</span><span class="n">x</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">repo</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">i</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">pypi</span><span class="o">.</span><span class="n">tuna</span><span class="o">.</span><span class="n">tsinghua</span><span class="o">.</span><span class="n">edu</span><span class="o">.</span><span class="n">cn</span><span class="o">/</span><span class="n">simple</span> <span class="n">requests</span>
</pre></div>
</div>
</li>
<li><p>Download code repositories. (There is no <strong>repo branch</strong> parameter.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repo</span> <span class="n">init</span> <span class="o">-</span><span class="n">u</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gitee</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openharmony</span><span class="o">/</span><span class="n">manifest</span><span class="o">.</span><span class="n">git</span> <span class="o">-</span><span class="n">b</span> <span class="n">master</span>
<span class="n">repo</span> <span class="n">sync</span> <span class="o">-</span><span class="n">c</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="committing-code">
<h2>Committing Code<a class="headerlink" href="#committing-code" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="committing-a-repository-git-clone">
<h2>Committing a Repository (git clone)<a class="headerlink" href="#committing-a-repository-git-clone" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p><strong>Update the branch.</strong></p>
<p>Update your local branch.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">fetch</span> <span class="n">origin</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">git</span> <span class="n">pull</span> <span class="o">--</span><span class="n">rebase</span>
</pre></div>
</div>
<p>Update the local debugging branch (<strong>myfeature</strong> branch) based on the
remote <strong>master</strong> branch.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">branch</span> <span class="n">myfeature</span> <span class="n">origin</span><span class="o">/</span><span class="n">master</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">myfeature</span>
</pre></div>
</div>
<p>Then, edit and modify the code in the <strong>myfeature</strong> branch.</p>
</li>
<li><p><strong>Commit the changes in the local working directory.</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Reason&quot;</span>
</pre></div>
</div>
<p>You may continue to edit and test more content after the previous
commit. You can use <strong>commit –amend</strong> to commit these changes.</p>
</li>
<li><p><strong>Push the changes to your remote directory.</strong></p>
<p>If you plan to review (or just establish a remote backup of your
work), push the branch to your fork repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="o">-</span><span class="n">f</span> <span class="n">origin</span> <span class="n">myfeature</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="committing-multiple-repositories-repo-init-sync">
<h2>Committing Multiple Repositories (repo init/sync)<a class="headerlink" href="#committing-multiple-repositories-repo-init-sync" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Configure the token of the global environment.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repo</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">repo</span><span class="o">.</span><span class="n">token</span> <span class="p">{</span><span class="n">TOKEN</span><span class="p">}</span>
</pre></div>
</div>
<p>The token is generated by choosing <strong>Settings</strong> &gt; <strong>Security Settings</strong>
&gt; <strong>Private Token</strong> on Gitee. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repo</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">repo</span><span class="o">.</span><span class="n">token</span> <span class="mi">211</span><span class="n">XXXXXXXXXXXXXXXXXXXXXXXX</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Create an issue under any repository to be modified on Gitee, and
record the issue number (for example, #I1TVV4 in the following
figure). (The issue provides a function similar to changeID of Gerrit
and is used to associate multiple repositories to be modified. Skip
this step if modification of multiple repositories is not involved.)</p></li>
<li><p>Create a branch in the local code workspace, modify the code, and
commit the changes.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repo</span> <span class="n">start</span> <span class="n">branchname</span> <span class="o">--</span><span class="nb">all</span>
</pre></div>
</div>
<p>After the code is modified, run the following command in multiple
repositories:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;xxxxxx&quot;</span>
</pre></div>
</div>
<p>Alternatively, use the repo tool to batch add or commit the changes in
the root directory of the code project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repo</span> <span class="n">forall</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;git add .&#39;</span>
<span class="n">repo</span> <span class="n">forall</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;git commit -m &quot;xxxxxx&quot;&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Push the code. (repo upload is not supported.)</p></li>
</ol>
<p>Specify whether to directly generate a pull request (PR) during code
push. The value <strong>False</strong> indicates that a PR is not directly generated
and needs to be manually generated in the fork warehouse. The value
<strong>True</strong> indicates that a PR is generated when the code is pushed to the
fork repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repo</span> <span class="n">config</span> <span class="n">repo</span><span class="o">.</span><span class="n">pullrequest</span> <span class="p">{</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">}</span>
</pre></div>
</div>
<p>For example, if the PR is generated when the push code is selected, run
the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repo</span> <span class="n">config</span> <span class="n">repo</span><span class="o">.</span><span class="n">pullrequest</span> <span class="kc">True</span>
</pre></div>
</div>
<p>Run the following command to push the code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repo</span> <span class="n">push</span> <span class="o">--</span><span class="n">br</span><span class="o">=</span><span class="p">{</span><span class="n">BRANCH</span><span class="p">}</span> <span class="o">--</span><span class="n">d</span><span class="o">=</span><span class="p">{</span><span class="n">DEST_BRANCH</span><span class="p">}</span> <span class="o">--</span><span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="n">PR_CONTENT</span><span class="p">}</span>
</pre></div>
</div>
<p><strong>BRANCH</strong> indicates the local branch, <strong>DEST_BRANCH</strong> indicates the
destination branch (trunk branch), which is usually <strong>master</strong>, and
<strong>PR_CONTENT</strong> indicates the PR description. If multi-repository
committing is involved, the issue number must be entered. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">repo</span> <span class="n">push</span> <span class="o">--</span><span class="n">br</span><span class="o">=</span><span class="s2">&quot;20200903&quot;</span> <span class="o">--</span><span class="n">d</span><span class="o">=</span><span class="s2">&quot;master&quot;</span> <span class="o">--</span><span class="n">content</span><span class="o">=</span><span class="s2">&quot;#I1TVV4&quot;</span>
</pre></div>
</div>
<p>On the editing page displayed, open the comment tags for the repository,
branch, and commit.</p>
<p><img alt="image1" src="../_images/无标题2.png" /></p>
<p>Save the settings and exit. The repo tool automatically pushes the local
branch to the remote fork repository (creates a fork repository if there
is no fork repository) and generates a PR.</p>
<p><img alt="image2" src="../_images/无标题3.png" /></p>
<p>The tool automatically associates the PR with the issue.</p>
</div>
<div class="section" id="creating-a-pull-request">
<h2>Creating a Pull Request<a class="headerlink" href="#creating-a-pull-request" title="Permalink to this headline">¶</a></h2>
<p>Access the fork repository on Gitee, click the button for creating a PR,
and select the <strong>myfeature</strong> branch to generate a PR. (Skip this step if
a PR has been automatically created using the repo tool.)</p>
<p>For details, visit <a class="reference external" href="https://gitee.com/help/articles/4128">https://gitee.com/help/articles/4128</a>.</p>
<blockquote>
<div><p><img alt="image3" src="../_images/icon-notice.gif" /> <strong>NOTICE:</strong> <strong>How do I create PRs at the same time if
multiple code repositories have compilation dependencies?</strong> During
the development of the operating system (OS), it is common that
multiple code repositories have compilation dependencies. Therefore,
the PRs need to be created and merged at the same time. For this
reason, Gitee uses issues as the dependency identifiers for code
repositories with compilation dependencies to commit the PRs. Follow
the operations below: 1. Create an issue in any of the code
repositories. 2. Associate PRs that need to be built and merged at
the same time with the issue. For details, visit
<a class="reference external" href="https://gitee.com/help/articles/4142">https://gitee.com/help/articles/4142</a>. 3. After the build is
triggered, the build center identifies the PRs associated with the
same issue, downloads the build, and merges the PRs into the code
library after the code is approved.</p>
</div></blockquote>
</div>
<div class="section" id="building-access-control">
<h2>Building Access Control<a class="headerlink" href="#building-access-control" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="creating-an-issue">
<h2>Creating an Issue<a class="headerlink" href="#creating-an-issue" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Go to the homepage of the repository.</p></li>
<li><p>Click the <strong>Issues</strong> tab in the upper left corner. Then, click the
issue creation button on the right, and create a dedicated task as
prompted to execute continuous integration (CI) access control for
associated code (feature development/bug fixing).</p></li>
</ol>
</div>
<div class="section" id="associating-the-issue-with-the-pr">
<h2>Associating the Issue with the PR<a class="headerlink" href="#associating-the-issue-with-the-pr" title="Permalink to this headline">¶</a></h2>
<p>When creating a PR or compiling an existing PR, enter <strong>#+I+five-digit
issue ID</strong> in the description box to associate the issue with the PR.</p>
<p><strong>Constraints</strong></p>
<ul class="simple">
<li><p>One PR can be associated with only one issue. Otherwise, CI cannot be
triggered.</p></li>
<li><p>If feature development or bug fixing involves multiple code
repositories, multiple PRs can be associated with the same issue.</p></li>
<li><p>Among the PRs associated with the issue, no PR that has been merged
or closed is allowed. Otherwise, the CI cannot be triggered.</p></li>
<li><p>If an issue has been associated with a merged or closed PR, the issue
cannot be reused. In this case, create another issue and associate it
with an open PR.</p></li>
</ul>
</div>
<div class="section" id="triggering-code-access-control">
<h2>Triggering Code Access Control<a class="headerlink" href="#triggering-code-access-control" title="Permalink to this headline">¶</a></h2>
<p>Comment “start build” in the PR to trigger CI access control.</p>
<p>If multiple PRs are associated with the same issue, the comment “start
build” on any PR can trigger the CI access control of the issue.</p>
<p>After the access control is executed, the execution result will be
automatically commented in all the PRs associated with the issue.</p>
<p>If the access control is passed, all PRs associated with the issue will
be automatically marked as “Passed”.</p>
</div>
<div class="section" id="reviewing-code">
<h2>Reviewing Code<a class="headerlink" href="#reviewing-code" title="Permalink to this headline">¶</a></h2>
<p>For details, visit <a class="reference external" href="https://gitee.com/help/articles/4304">https://gitee.com/help/articles/4304</a>.</p>
<p>Related topic: <a class="reference external" href="faqs.md">FAQs</a></p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/contribute/contribution-process.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
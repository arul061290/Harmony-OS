
<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JavaScript Coding Style Guide &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="javascript-coding-style-guide">
<h1>JavaScript Coding Style Guide<a class="headerlink" href="#javascript-coding-style-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="goal">
<h2>Goal<a class="headerlink" href="#goal" title="Permalink to this headline">¶</a></h2>
<p>Rules are not perfect. Prohibiting features that are useful in specific
situations can have an impact on code implementation, but we set the
rules for the benefit of most programmers. If we identify a rule cannot
be followed in the operations, we should work together to improve the
rule. You are supposed to have the basic JavaScript language
capabilities to refer to this guide, instead of learning the JavaScript
language from it.</p>
</div>
<div class="section" id="general-principles">
<h2>General Principles<a class="headerlink" href="#general-principles" title="Permalink to this headline">¶</a></h2>
<p>The code is required to be <strong>readable, maintainable, secure, reliable,
testable, efficient, and portable</strong> on the premise that the functions
are correct.</p>
</div>
<div class="section" id="convention">
<h2>Convention<a class="headerlink" href="#convention" title="Permalink to this headline">¶</a></h2>
<p><strong>Rule</strong>: Conventions that must be complied with during programming
<strong>Recommendation</strong>: Conventions that must be considered during
programming</p>
<p>It is important to understand why this convention is so stated in both
“Rules” or “Recommendations” and make efforts to comply.</p>
</div>
<div class="section" id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h2>
<p>If the General Principle is not violated, the rules can be properly
violated after full consideration and sufficient reasons are provided.
Exceptions compromise code consistency so please avoid exceptions.
Exceptions to “Rules” should be rare.</p>
<p>The style consistency principle is preferred in the following
situations: <strong>When modifying external open-source code and third-party
code, comply with the existing rules of the open-source code and
third-party code and keep the style consistent.</strong></p>
</div>
<div class="section" id="programming-regulations">
<h2>Programming Regulations<a class="headerlink" href="#programming-regulations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="naming-regulations">
<h3>Naming Regulations<a class="headerlink" href="#naming-regulations" title="Permalink to this headline">¶</a></h3>
<div class="section" id="rule-1-1-use-correct-english-spellings-to-name-no-use-of-pinyin-spellings">
<h4>Rule 1.1 Use correct English spellings to name, no use of pinyin spellings.<a class="headerlink" href="#rule-1-1-use-correct-english-spellings-to-name-no-use-of-pinyin-spellings" title="Permalink to this headline">¶</a></h4>
<p><strong>Counterexample:</strong><code class="docutils literal notranslate"><span class="pre">xingming</span></code>,<code class="docutils literal notranslate"><span class="pre">zhanghao</span></code></p>
<p><strong>Example:</strong><code class="docutils literal notranslate"><span class="pre">username</span></code>,<code class="docutils literal notranslate"><span class="pre">account</span></code></p>
</div>
<div class="section" id="rule-1-2-use-abbreviations-as-few-as-possible-except-for-common-words-or-professional-words-for-example-context-can-be-shortened-to-ctx-request-can-be-shortened-to-req-and-response-can-be-shortened-to-resp">
<h4>Rule 1.2 Use abbreviations as few as possible, except for common words or professional words. For example, <code class="docutils literal notranslate"><span class="pre">context</span></code> can be shortened to <code class="docutils literal notranslate"><span class="pre">ctx</span></code>, <code class="docutils literal notranslate"><span class="pre">request</span></code> can be shortened to <code class="docutils literal notranslate"><span class="pre">req</span></code>, and <code class="docutils literal notranslate"><span class="pre">response</span></code> can be shortened to <code class="docutils literal notranslate"><span class="pre">resp</span></code>.<a class="headerlink" href="#rule-1-2-use-abbreviations-as-few-as-possible-except-for-common-words-or-professional-words-for-example-context-can-be-shortened-to-ctx-request-can-be-shortened-to-req-and-response-can-be-shortened-to-resp" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> Complete spelling of words can avoid unnecessary
misunderstanding.</p>
<p><strong>Exceptions:</strong> The variable name of the cyclic condition can be <code class="docutils literal notranslate"><span class="pre">i</span></code>
or <code class="docutils literal notranslate"><span class="pre">j</span></code> in the cyclic language.</p>
</div>
<div class="section" id="rule-1-3-class-name-enumeration-name-and-namespace-name-should-comply-the-uppercamelcase-style">
<h4>Rule 1.3 Class name, enumeration name and namespace name should comply the <code class="docutils literal notranslate"><span class="pre">upperCamelCase</span></code> style.<a class="headerlink" href="#rule-1-3-class-name-enumeration-name-and-namespace-name-should-comply-the-uppercamelcase-style" title="Permalink to this headline">¶</a></h4>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Class name</span>
<span class="kr">class</span> <span class="nx">User</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">username</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">sayHi</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`hi, </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Enumeration name</span>
<span class="kr">const</span> <span class="nx">UserType</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">TEACHER</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
  <span class="nx">STUDENT</span><span class="o">:</span> <span class="mf">1</span>
<span class="p">};</span>

<span class="c1">// Namespace</span>
<span class="kr">const</span> <span class="nx">Base64Utils</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">encrypt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// todo encrypt</span>
  <span class="p">},</span>
  <span class="nx">decrypt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// todo decrypt</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-1-4-variable-name-method-name-and-parameter-name-should-comply-the-lowercamelcase-style">
<h4>Rule 1.4 Variable name, method name, and parameter name should comply the <code class="docutils literal notranslate"><span class="pre">lowerCamelCase</span></code> style.<a class="headerlink" href="#rule-1-4-variable-name-method-name-and-parameter-name-should-comply-the-lowercamelcase-style" title="Permalink to this headline">¶</a></h4>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">msg</span> <span class="o">=</span> <span class="s1">&#39;Hello world&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">sendMsg</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// todo send message</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">findUser</span><span class="p">(</span><span class="nx">userID</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// todo find user by user ID</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-1-5-the-names-of-static-constants-and-enumeration-values-must-be-in-upper-case-and-words-are-separated-by-underscores">
<h4>Rule 1.5 The names of static constants and enumeration values must be in upper case, and words are separated by underscores (_).<a class="headerlink" href="#rule-1-5-the-names-of-static-constants-and-enumeration-values-must-be-in-upper-case-and-words-are-separated-by-underscores" title="Permalink to this headline">¶</a></h4>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">MAX_USER_SIZE</span> <span class="o">=</span> <span class="mf">10000</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">UserType</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">TEACHER</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
  <span class="nx">STUDENT</span><span class="o">:</span> <span class="mf">1</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="recommendation-1-6-do-not-use-negative-boolean-variable-names-local-variables-or-methods-of-the-boolean-type-must-be-prefixed-with-expressions-with-the-meaning-of-right-or-wrong">
<h4>Recommendation 1.6 Do not use negative Boolean variable names. Local variables or methods of the Boolean type must be prefixed with expressions with the meaning of right or wrong.<a class="headerlink" href="#recommendation-1-6-do-not-use-negative-boolean-variable-names-local-variables-or-methods-of-the-boolean-type-must-be-prefixed-with-expressions-with-the-meaning-of-right-or-wrong" title="Permalink to this headline">¶</a></h4>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">isNoError</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">isNotFound</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">empty</span><span class="p">()</span> <span class="p">{}</span>
<span class="kd">function</span> <span class="nx">next</span><span class="p">()</span> <span class="p">{}</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">isError</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">isFound</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">isEmpty</span><span class="p">()</span> <span class="p">{}</span>
<span class="kd">function</span> <span class="nx">hasNext</span><span class="p">()</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="code-format">
<h3>Code Format<a class="headerlink" href="#code-format" title="Permalink to this headline">¶</a></h3>
<div class="section" id="rule-2-1-use-two-spaces-to-indent-and-do-not-use-the-tab-character">
<h4>Rule 2.1 Use two spaces to indent, and do not use the <code class="docutils literal notranslate"><span class="pre">tab</span></code> character.<a class="headerlink" href="#rule-2-1-use-two-spaces-to-indent-and-do-not-use-the-tab-character" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> Only spaces are allowed for indentation. Two spaces are
allowed at a time. Tab characters are not allowed for indentation.</p>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">dataSource</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Title 1&#39;</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content 1&#39;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Title 2&#39;</span><span class="p">,</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content 2&#39;</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="kd">function</span> <span class="nx">render</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">dataSource</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">container</span> <span class="o">||</span> <span class="o">!</span><span class="nx">dataSource</span> <span class="o">||</span> <span class="o">!</span><span class="nx">dataSource</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">void</span> <span class="mf">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kr">const</span> <span class="nx">fragment</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">data</span> <span class="k">of</span> <span class="nx">dataSource</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span> <span class="o">||</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span> <span class="o">||</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">title</span> <span class="o">||</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kr">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
    <span class="kr">const</span> <span class="nx">textNode</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">content</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">textNode</span><span class="p">);</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">fragment</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-2-2-the-line-width-cannot-exceed-120-characters">
<h4>Rule 2.2 The line width cannot exceed 120 characters.<a class="headerlink" href="#rule-2-2-the-line-width-cannot-exceed-120-characters" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> It is recommended that each line should contain no more than
120 characters. Use a proper method to break the line if the line
contain more than 120 characters.</p>
<p><strong>Exception:</strong> If a line of comments contains more than 120 characters
of commands or URLs, keep it in one line for easy copying, pasting, and
searching by running the grep command. The preprocessed error
information is easy to read and understand in one line, even if it
contains more than 120 characters.</p>
</div>
<div class="section" id="rule-2-3-the-use-of-braces-must-comply-with-the-following-conventions">
<h4>Rule 2.3 The use of braces must comply with the following conventions:<a class="headerlink" href="#rule-2-3-the-use-of-braces-must-comply-with-the-following-conventions" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>If the value in the braces is empty, the value can be abbreviated as
<code class="docutils literal notranslate"><span class="pre">{}</span></code> without a newline.</p></li>
<li><p>The left braces do not contain a line feed, and the left braces are
followed by a line feed.</p></li>
<li><p>Line feeds before the right brace. If there is <code class="docutils literal notranslate"><span class="pre">else</span></code> or <code class="docutils literal notranslate"><span class="pre">catch</span></code>
after the brace, line feeds are not required. In other cases, line
feeds are required.</p></li>
</ol>
</div>
<div class="section" id="rule-2-4-implementations-of-conditional-and-loop-statements-must-be-enclosed-in-braces-even-if-there-is-only-one-statement">
<h4>Rule 2.4 Implementations of conditional and loop statements must be enclosed in braces, even if there is only one statement.<a class="headerlink" href="#rule-2-4-implementations-of-conditional-and-loop-statements-must-be-enclosed-in-braces-even-if-there-is-only-one-statement" title="Permalink to this headline">¶</a></h4>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">);</span>

<span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">idx</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">idx</span> <span class="o">&lt;</span> <span class="mf">5</span><span class="p">;</span> <span class="o">++</span><span class="nx">idx</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">idx</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">idx</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">idx</span> <span class="o">&lt;</span> <span class="mf">5</span><span class="p">;</span> <span class="o">++</span><span class="nx">idx</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">idx</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-2-5-condition-statements-and-loop-statements-cannot-be-written-in-one-line">
<h4>Rule 2.5 Condition statements and loop statements cannot be written in one line.<a class="headerlink" href="#rule-2-5-condition-statements-and-loop-statements-cannot-be-written-in-one-line" title="Permalink to this headline">¶</a></h4>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* todo something */</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="cm">/* todo other */</span> <span class="p">}</span>

<span class="kd">let</span> <span class="nx">idx</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="nx">idx</span> <span class="o">&lt;</span> <span class="mf">10</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">idx</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="cm">/* todo something */</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="cm">/* todo other */</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">idx</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="nx">idx</span> <span class="o">&lt;</span> <span class="mf">10</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">idx</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-2-6-the-case-and-default-in-the-switch-statement-must-be-indented-by-one-layer">
<h4>Rule 2.6 The <code class="docutils literal notranslate"><span class="pre">case</span></code> and <code class="docutils literal notranslate"><span class="pre">default</span></code> in the <code class="docutils literal notranslate"><span class="pre">switch</span></code> statement must be indented by one layer.<a class="headerlink" href="#rule-2-6-the-case-and-default-in-the-switch-statement-must-be-indented-by-one-layer" title="Permalink to this headline">¶</a></h4>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">switch</span><span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mf">0</span><span class="o">:</span>
    <span class="nx">doSomething</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mf">1</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// the braces is not necessary</span>
    <span class="nx">doOtherthing</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">default</span><span class="o">:</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-2-7-the-line-feeds-of-expressions-must-be-consistent-and-the-operator-must-be-placed-at-the-end-of-the-line">
<h4>Rule 2.7 The line feeds of expressions must be consistent, and the operator must be placed at the end of the line.<a class="headerlink" href="#rule-2-7-the-line-feeds-of-expressions-must-be-consistent-and-the-operator-must-be-placed-at-the-end-of-the-line" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> If a long expression does not meet the line width requirement,
you need to wrap the line in a proper position. Generally, in the late
phrase of the lower-priority operator or connector, the operator or
connector should be placed at the end of the line. The operator and
separator are placed at the end of the line, indicating that there is
not the end.</p>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// if the condition statement exceeds the line width.</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">userCount</span> <span class="o">&gt;</span> <span class="nx">MAX_USER_COUNT</span> <span class="o">||</span>
  <span class="nx">userCount</span> <span class="o">&lt;</span> <span class="nx">MIN_USER_COUNT</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">doSomething</span><span class="p">();</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">sum</span> <span class="o">=</span>
  <span class="nx">number1</span> <span class="o">+</span>
  <span class="nx">number2</span> <span class="o">+</span>
  <span class="nx">number3</span> <span class="o">+</span>
  <span class="nx">number4</span> <span class="o">+</span>
  <span class="nx">number5</span> <span class="o">+</span>
  <span class="nx">number6</span> <span class="o">+</span>
  <span class="nx">number7</span> <span class="o">+</span>
  <span class="nx">number8</span> <span class="o">+</span>
  <span class="nx">number9</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-2-8-multiple-variable-definitions-and-assignment-statements-cannot-be-written-in-one-line">
<h4>Rule 2.8 Multiple variable definitions and assignment statements cannot be written in one line.<a class="headerlink" href="#rule-2-8-multiple-variable-definitions-and-assignment-statements-cannot-be-written-in-one-line" title="Permalink to this headline">¶</a></h4>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">maxCount</span> <span class="o">=</span> <span class="mf">10</span><span class="p">,</span> <span class="nx">isCompleted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">pointX</span><span class="p">,</span> <span class="nx">pointY</span><span class="p">;</span>
<span class="nx">pointX</span> <span class="o">=</span> <span class="mf">10</span><span class="p">;</span> <span class="nx">pointY</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">maxCount</span> <span class="o">=</span> <span class="mf">10</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">isCompleted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">pointX</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">pointY</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-2-9-spaces-should-highlight-keywords-and-important-information-avoid-unnecessary-spaces">
<h4>Rule 2.9 Spaces should highlight keywords and important information. Avoid unnecessary spaces.<a class="headerlink" href="#rule-2-9-spaces-should-highlight-keywords-and-important-information-avoid-unnecessary-spaces" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> Spaces reduce code density and increase code readability. The
general rules are as follows:</p>
<ol class="arabic simple">
<li><p>Add a spaces after keywords
<code class="docutils literal notranslate"><span class="pre">if</span></code>、<code class="docutils literal notranslate"><span class="pre">elseif</span></code>、<code class="docutils literal notranslate"><span class="pre">else</span></code>、<code class="docutils literal notranslate"><span class="pre">switch</span></code>、<code class="docutils literal notranslate"><span class="pre">while</span></code>、<code class="docutils literal notranslate"><span class="pre">for</span></code>.</p></li>
<li><p>No space is added between the parentheses.</p></li>
<li><p>Spaces must be added on both sides of the braces, except for simple
scenarios such as <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</p></li>
<li><p>No space is added between multiple parentheses.</p></li>
<li><p>No space is added after unary operators (<code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>,
<code class="docutils literal notranslate"><span class="pre">!</span></code>,etc.).</p></li>
<li><p>Add a space on the left and right side of binary operators
<code class="docutils literal notranslate"><span class="pre">=</span></code>、<code class="docutils literal notranslate"><span class="pre">+</span></code>、<code class="docutils literal notranslate"><span class="pre">-</span></code>、<code class="docutils literal notranslate"><span class="pre">*</span></code>、<code class="docutils literal notranslate"><span class="pre">/</span></code>、<code class="docutils literal notranslate"><span class="pre">%</span></code>、<code class="docutils literal notranslate"><span class="pre">|</span></code>、<code class="docutils literal notranslate"><span class="pre">&amp;</span></code>、<code class="docutils literal notranslate"><span class="pre">||</span></code>、<code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>、<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>、<code class="docutils literal notranslate"><span class="pre">&gt;</span></code>、<code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>、<code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>、<code class="docutils literal notranslate"><span class="pre">==</span></code>、<code class="docutils literal notranslate"><span class="pre">!=</span></code>、<code class="docutils literal notranslate"><span class="pre">===</span></code>、<code class="docutils literal notranslate"><span class="pre">!==</span></code>,
etc.)</p></li>
<li><p>Add a space on the left and right side of ternary operator
（<code class="docutils literal notranslate"><span class="pre">?:</span></code>）.</p></li>
<li><p>No space is added between the preceded or post-decrease (<code class="docutils literal notranslate"><span class="pre">++</span></code>,
<code class="docutils literal notranslate"><span class="pre">--</span></code>) and variables.</p></li>
<li><p>Add a space before a comma (<code class="docutils literal notranslate"><span class="pre">,</span></code>).</p></li>
<li><p>Add a space after <code class="docutils literal notranslate"><span class="pre">//</span></code> in a single line.</p></li>
<li><p>No space is added at the end of the line.</p></li>
</ol>
</div>
<div class="section" id="rule-2-10-expression-statements-must-end-with-a-semicolon">
<h4>Rule 2.10 Expression statements must end with a semicolon.<a class="headerlink" href="#rule-2-10-expression-statements-must-end-with-a-semicolon" title="Permalink to this headline">¶</a></h4>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">username</span> <span class="o">=</span> <span class="s1">&#39;jack&#39;</span>
<span class="kd">let</span> <span class="nx">birthday</span> <span class="o">=</span> <span class="s1">&#39;1997-09-01&#39;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">username</span><span class="si">}</span><span class="sb">&#39;s birthday is </span><span class="si">${</span><span class="nx">birthday</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">username</span> <span class="o">=</span> <span class="s1">&#39;jack&#39;</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">birthday</span> <span class="o">=</span> <span class="s1">&#39;1997-09-01&#39;</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">username</span><span class="si">}</span><span class="sb">&#39;s birthday is </span><span class="si">${</span><span class="nx">birthday</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="recommendation-2-11-use-single-quotation-marks-to-wrap-strings-first">
<h4>Recommendation 2.11 Use single quotation marks to wrap strings first.<a class="headerlink" href="#recommendation-2-11-use-single-quotation-marks-to-wrap-strings-first" title="Permalink to this headline">¶</a></h4>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="s1">&#39;wolrd&#39;</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="code-instructions">
<h3>Code instructions<a class="headerlink" href="#code-instructions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="rule-3-1-when-declaring-a-variable-use-the-keyword-var-let-or-const-to-prevent-the-variable-from-being-exposed-to-the-global-scope">
<h4>Rule 3.1 When declaring a variable, use the keyword <code class="docutils literal notranslate"><span class="pre">var</span></code>, <code class="docutils literal notranslate"><span class="pre">let</span></code>, or <code class="docutils literal notranslate"><span class="pre">const</span></code> to prevent the variable from being exposed to the global scope.<a class="headerlink" href="#rule-3-1-when-declaring-a-variable-use-the-keyword-var-let-or-const-to-prevent-the-variable-from-being-exposed-to-the-global-scope" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> If the keyword <code class="docutils literal notranslate"><span class="pre">var</span></code>, <code class="docutils literal notranslate"><span class="pre">let</span></code>, or <code class="docutils literal notranslate"><span class="pre">const</span></code> is not used to
declare a variable, the variable will be exposed to the global scope,
which may overwrite the variable with the same name in the global scope.
As a result, the GC cannot effectively reclaim the memory. In addition,
when a variable contains sensitive information, exposuring to the global
scope may result in information leakage. ** Use <code class="docutils literal notranslate"><span class="pre">const</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">var</span></code> for all references; Use <code class="docutils literal notranslate"><span class="pre">let</span></code> instead of <code class="docutils literal notranslate"><span class="pre">var</span></code> if you need a
variable reference.** Because the scope of <code class="docutils literal notranslate"><span class="pre">const</span></code> and <code class="docutils literal notranslate"><span class="pre">let</span></code> is
smaller, writing code is easier to control. Const ensures that the
reference cannot be re-assigned. The pointer referenced by const is
immutable, and an error will be reported during re-assignment, avoiding
overwriting.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:8080&#39;</span><span class="p">;</span> <span class="c1">//url will be exposed to the global scope</span>
  <span class="c1">//todo something</span>
<span class="p">}</span>
<span class="nx">open</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span> <span class="c1">//url can be accessed, output: http://127.0.0.1:8080</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// ES5.1 Using var to declare variables</span>
<span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:8080&#39;</span><span class="p">;</span>
  <span class="c1">// todo something</span>
<span class="p">}</span>
<span class="nx">open</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span> <span class="c1">//Report: Uncaught ReferenceError: url is not defined</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// In ES6, the let and const keywords are preferred to declare variables.</span>
<span class="kd">function</span> <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:8080&#39;</span><span class="p">;</span>
  <span class="c1">//todo something</span>
<span class="p">}</span>
<span class="nx">open</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span> <span class="c1">//Report: Uncaught ReferenceError: url is not defined</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-3-2-function-expressions-must-be-used-to-declare-functions-in-function-blocks">
<h4>Rule 3.2 Function expressions must be used to declare functions in function blocks.<a class="headerlink" href="#rule-3-2-function-expressions-must-be-used-to-declare-functions-in-function-blocks" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> Although many JS engines support in-block declaration
functions, they do not belong to the ECMAScript specification. The poor
implementation of browsers is incompatible with each other, and some are
contrary to the future ECMAScript draft. In addition, ECMAScript5 does
not support block scopes. All control flows are not independent scopes.
Variables or functions declared in the control flows are in the scope of
their parent functions or scripts. As a result, the declaration of
functions or variables in blocks may be overwritten. If you do need to
define a function in a block, you should initialize it using a function
expression.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">bar</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;hotel&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 1. Define a foo function. The function scope is not the &#39;if&#39; code block but the &#39;bar&#39; function scope.</span>
    <span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hotel foo A&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// 2. Define the &#39;foo&#39; function again to overwrite the &#39;foo&#39; function definition under the &#39;if&#39; condition branch.</span>
    <span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hotel foo 2&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">foo</span> <span class="o">&amp;&amp;</span> <span class="nx">foo</span><span class="p">();</span>
<span class="p">}</span>
<span class="nx">bar</span><span class="p">(</span><span class="s2">&quot;hotel&quot;</span><span class="p">);</span> <span class="c1">// output is shown as&quot;hotel foo 2&quot;</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">bar</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">foo</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">==</span> <span class="s2">&quot;hotel&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hotel foo 1&quot;</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hotel foo 2&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">foo</span> <span class="o">&amp;&amp;</span> <span class="nx">foo</span><span class="p">();</span>
<span class="p">}</span>
<span class="nx">bar</span><span class="p">(</span><span class="s2">&quot;hotel&quot;</span><span class="p">);</span> <span class="c1">// Correct output&quot;hotel foo 1&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-3-3-encapsulation-of-basic-types-is-prohibited">
<h4>Rule 3.3 Encapsulation of Basic Types is prohibited<a class="headerlink" href="#rule-3-3-encapsulation-of-basic-types-is-prohibited" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> JavaScript has five basic data types: Undefined, Null,
Boolean, Number, and String. The value of the base data type is
unchangeable. The basic data type object used in JavaScript is only a
value. It does not contain the methods and attributes of the object
encapsulated by the object. When the attributes and methods are not
required, the encapsulation type of the object does not need to be used.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">isShow</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Boolean</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isShow</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">);</span> <span class="c1">//It is executed, and the following information is displayed: hi</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">isShow</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">isShow</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-3-4-the-use-of-with-is-prohibited">
<h4>Rule 3.4 The use of <code class="docutils literal notranslate"><span class="pre">with</span></code> is prohibited<a class="headerlink" href="#rule-3-4-the-use-of-with-is-prohibited" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> Using ‘with’ makes your code semantically unclear, because
objects of ‘with’ may conflict with local variables, changing the
original meaning of the program.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mf">5</span> <span class="p">};</span>
<span class="kd">with</span><span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mf">3</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">//Output: 5</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-3-5-this-can-only-be-used-in-object-constructors-methods-and-closures">
<h4>Rule 3.5 <code class="docutils literal notranslate"><span class="pre">this</span></code> can only be used in object constructors, methods, and closures.<a class="headerlink" href="#rule-3-5-this-can-only-be-used-in-object-constructors-methods-and-closures" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> In JavaScript, the “this” pointer represents the owner of the
object that executes the current code. This has special semantics:</p>
<ul class="simple">
<li><p>Global objects (in most cases)</p></li>
<li><p>Scope of the caller (when eval is used)</p></li>
<li><p>Nodes in the DOM tree (when adding event handling functions)</p></li>
<li><p>Newly created object (using a constructor)</p></li>
<li><p>Other objects (if the function is called() or apply())</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">User</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">username</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">);</span> <span class="c1">// Output: John</span>

<span class="kd">var</span> <span class="nx">ClickCounter</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">value</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
  <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">++</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">getValue</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Counter</span><span class="p">.</span><span class="nx">getValue</span><span class="p">());</span> <span class="c1">//Output: 0</span>
<span class="nx">Counter</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Counter</span><span class="p">.</span><span class="nx">getValue</span><span class="p">());</span> <span class="c1">//Output: 1</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-3-6-do-not-use-conditional-comments-in-ie">
<h4>Rule 3.6 Do not use conditional comments in IE.<a class="headerlink" href="#rule-3-6-do-not-use-conditional-comments-in-ie" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> Conditional compilation can be activated using the <code class="docutils literal notranslate"><span class="pre">\&#64;cc_on</span></code>
statement or the <code class="docutils literal notranslate"><span class="pre">\&#64;if</span></code> or <code class="docutils literal notranslate"><span class="pre">\&#64;set</span></code> statement in IE. Although
comments can be made to be compatible with browsers other than IE, they
hinder the execution of automation tools because they change the
JavaScript syntax tree at run time.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="cm">/*@cc_on @*/</span>
  <span class="cm">/*@if (@_jscript_version &gt;= 4)</span>
<span class="cm">       alert(&quot;JavaScript version 4 or better&quot;);</span>
<span class="cm">    @else @*/</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Conditional compilation not supported by this scripting engine.&quot;</span><span class="p">);</span>
  <span class="cm">/*@end @*/</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-3-7-prototypes-of-built-in-objects-cannot-be-modified">
<h4>Rule 3.7 Prototypes of built-in objects cannot be modified.<a class="headerlink" href="#rule-3-7-prototypes-of-built-in-objects-cannot-be-modified" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> As a set of public interfaces, built-in objects have
conventional behaviors. Modifying the prototype may damage the interface
semantics or cause abnormalities during debugging.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">indexOf</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="o">-</span><span class="mf">1</span> <span class="p">}</span>
<span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">1</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">aar</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="mf">2</span><span class="p">));</span> <span class="c1">// Output:-1</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-3-8-do-not-directly-use-the-built-in-attribute-of-object-prototype">
<h4>Rule 3.8 Do not directly use the built-in attribute of <code class="docutils literal notranslate"><span class="pre">Object.prototype</span></code>.<a class="headerlink" href="#rule-3-8-do-not-directly-use-the-built-in-attribute-of-object-prototype" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> ECMAScript 5.1 adds <code class="docutils literal notranslate"><span class="pre">Object.create</span></code>, which creates a new
object and uses an existing object to provide the proto of the newly
created object. <code class="docutils literal notranslate"><span class="pre">Object.create(null)</span></code> is a common pattern for creating
objects used as maps. Unexpected behavior or vulnerability may occur
when the object has an attribute with the same name as
<code class="docutils literal notranslate"><span class="pre">Object.prototype</span></code>. For example, it is not safe for a web server to
parse JSON input from a client and use <code class="docutils literal notranslate"><span class="pre">hasOwnProperty</span></code> to directly
invoke the generated object, because a malicious client may send a
similar JSON value <code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">{&quot;hasOwnProperty&quot;:</span> <span class="pre">1}</span> <span class="pre">'</span></code> and cause the server to
crash.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hasBarProperty</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">isPrototypeOfBar</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">isPrototypeOf</span><span class="p">(</span><span class="nx">bar</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">barIsEnumerable</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">propertyIsEnumerable</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">hasBarProperty</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">isPrototypeOfBar</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isPrototypeOf</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">barIsEnumerable</span> <span class="o">=</span> <span class="p">{}.</span><span class="nx">propertyIsEnumerable</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-3-9-use-the-object-getprototypeof-function-instead-of-proto">
<h4>Rule 3.9 Use the <code class="docutils literal notranslate"><span class="pre">Object.getPrototypeOf</span></code> function instead of <code class="docutils literal notranslate"><span class="pre">_proto_</span></code><a class="headerlink" href="#rule-3-9-use-the-object-getprototypeof-function-instead-of-proto" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> ES5 introduces the <code class="docutils literal notranslate"><span class="pre">Object.getPrototypeOf</span></code> function as the
standard API for obtaining object prototypes, but a large number of
JavaScript engines have long used a special
<code class="docutils literal notranslate"><span class="pre">proto'</span> <span class="pre">attribute</span> <span class="pre">to</span> <span class="pre">achieve</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">purpose.</span> <span class="pre">However,</span></code>proto` is
essentially an internal attribute rather than a formal external API.
Currently, this attribute must be deployed in browsers, but not in other
running environments. Therefore, this attribute is not fully compatible.
For example, objects with null prototypes are handled differently in
different environments.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">empty</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="s2">&quot;_proto_&quot;</span> <span class="k">in</span> <span class="nx">empty</span><span class="p">;</span> <span class="c1">//Some environments false is returned, some environments true is returned.</span>
</pre></div>
</div>
<p>Therefore, use <code class="docutils literal notranslate"><span class="pre">Object.getPrototypeOf()</span></code> instead of using the proto
attribute in terms of semantics and compatibility. The
`Object.getPrototypeOf’ function is valid in any environment and is a
more standard and portable method for extracting object prototypes.</p>
</div>
<div class="section" id="rule-3-10-do-not-create-functions-with-function-constructors">
<h4>Rule 3.10 Do not create functions with function constructors.<a class="headerlink" href="#rule-3-10-do-not-create-functions-with-function-constructors" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> There are three methods for defining a function: function
declaration, function constructor, and function expression. Regardless
of in which method you define a function, they are instances of the
Function object and inherit all default or custom methods and properties
of the Function object. The method of creating a function using a
function constructor is similar to the character string <code class="docutils literal notranslate"><span class="pre">eval()</span></code>. Any
character string can be used as the function body, which may cause
security vulnerabilities.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">func</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;return a + b&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">func2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="s1">&#39;alert(&quot;Hello&quot;)&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">func</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">func2</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="suggestion-3-11-when-using-the-prototype-prototype-to-implement-inheritance-try-to-use-the-existing-stable-library-methods-instead-of-self-implementing-them">
<h4>Suggestion 3.11 When using the prototype `prototype’ to implement inheritance, try to use the existing stable library methods instead of self-implementing them.<a class="headerlink" href="#suggestion-3-11-when-using-the-prototype-prototype-to-implement-inheritance-try-to-use-the-existing-stable-library-methods-instead-of-self-implementing-them" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> The multi-level prototype structure refers to the inheritance
relationship in JavaScript. When you define a class D and use class B as
its prototype, you get a multilevel prototype structure. These prototype
structures can get complicated. Using existing stable library methods
such as <code class="docutils literal notranslate"><span class="pre">goog.inherits()</span></code> of the Closure library or other similar
functions can avoid unnecessary coding errors.</p>
</div>
<div class="section" id="suggestion-3-12-when-defining-a-class-you-should-define-the-method-under-the-prototype-and-the-attributes-within-the-constructor">
<h4>Suggestion 3.12 When defining a class, you should define the method under the prototype and the attributes within the constructor.<a class="headerlink" href="#suggestion-3-12-when-defining-a-class-you-should-define-the-method-under-the-prototype-and-the-attributes-within-the-constructor" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> There are multiple methods in JavaScript to add methods or
members to constructors. However, using a prototype to define methods
can reduce memory usage and improve running efficiency.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Animals</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">walk</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span> <span class="c1">// This causes a walk method to be created on each instance.</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">Animals</span><span class="p">()</span> <span class="p">{}</span>

<span class="nx">Animals</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">walk</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
</pre></div>
</div>
</div>
<div class="section" id="suggestion-3-13-when-using-closures-avoid-cyclic-reference-which-may-cause-memory-leakage">
<h4>Suggestion 3.13 When using closures, avoid cyclic reference, which may cause memory leakage.<a class="headerlink" href="#suggestion-3-13-when-using-closures-avoid-cyclic-reference-which-may-cause-memory-leakage" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> JavaScript is a garbage collection language in which the
memory of an object is allocated to the object based on its creation and
is reclaimed by the browser when there is no reference to the object.
JavaScript’s garbage collection mechanism is fine on its own, but
browsers are somewhat different in the way they allocate and recover
memory for DOM objects. Both IE and Firefox use reference counting to
process memory for DOM objects. In the reference counting system, each
referenced object keeps a count to see how many objects are referencing
it. If the count is zero, the object is destroyed and the memory it
occupies is returned to the heap. While this solution is generally
effective, there are some blind spots in circular references. When two
objects refer to each other, they form a circular reference, where the
reference counting values of the objects are assigned to 1. In pure
garbage collection systems, circular references are not a problem: if
one of the two objects involved is referenced by any other object, both
objects will be garbage collected. In a reference counting system,
neither of these objects can be destroyed because reference counting can
never be 0. In a hybrid system that uses both garbage collection and
reference counting, a leak occurs because the system does not correctly
recognize circular references. In this case, neither the DOM object nor
the JavaScript object can be destroyed. Circular references are easy to
create. Circular references are particularly prominent in closures, one
of JavaScript’s most convenient programming structures. Closures hold
references to their external scopes (including local variables,
parameters, and methods). When the closure itself is held by scope
members (usually DOM objects), circular references are formed, which
further leads to memory leaks.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">setClickListener</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">element</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Use a and b here</span>
  <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>In the above code, the closure retains references to elements, a, and b
even if element is not used. Because the element also retains the
reference to the closure, a circular reference is generated and cannot
be recycled by the GC.</p>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">setClickListener</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">element</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nx">createHandler</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">createHandler</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// By adding another function to avoid the closure itself, you can organize memory leaks.</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Use a and b here</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="suggestion-3-14-watch-out-for-javascript-floating-point-numbers">
<h4>Suggestion 3.14 Watch out for JavaScript floating point numbers.<a class="headerlink" href="#suggestion-3-14-watch-out-for-javascript-floating-point-numbers" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> JavaScript has a single numeric type: <code class="docutils literal notranslate"><span class="pre">IEEE</span> <span class="pre">754</span></code>
double-precision floating point number. Having a single numeric type is
one of the best features of JavaScript. Multiple number types can be a
source of complexity, confusion and error. However, one of the biggest
drawbacks of the binary floating-point type is that it does not
accurately represent the fractional part, causing unexpected precision
problems, as shown in the following examples.</p>
<p>Sample Code1:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span> <span class="o">===</span> <span class="mf">0.3</span><span class="p">);</span> <span class="c1">// Output: false. Therefore, do not use == or === to compare floating-point numbers.</span>
</pre></div>
</div>
<p>Sample Code2:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">sum1</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.3</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sum1</span><span class="p">);</span> <span class="c1">// Output: 0.6000000000000001</span>

<span class="kd">var</span> <span class="nx">sum2</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.2</span> <span class="o">+</span> <span class="mf">0.3</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sum2</span><span class="p">);</span> <span class="c1">// Output: 0.6. Therefore, for binary floating-point numbers, (a + b) + c cannot be guaranteed to produce the same result as a + (b + c).</span>
</pre></div>
</div>
<p>The effective solutions are as follows:</p>
<ol class="arabic">
<li><p>Use integers as much as possible because integers do not need to be
rounded.</p></li>
<li><p>The native JavaScript method
<code class="docutils literal notranslate"><span class="pre">Number.prototype.toFixed(digits)</span></code>,<code class="docutils literal notranslate"><span class="pre">digist</span></code> is used to indicate
the number of digits after the decimal point. The exponential method
is not used. If necessary, the number is rounded off. This method is
used to reduce the precision of the calculation result before
determining the floating-point number calculation result. The sample
code is as follows:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">parseFloat</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span> <span class="c1">//0.3</span>
</pre></div>
</div>
</li>
<li><p>A very small constant <code class="docutils literal notranslate"><span class="pre">Number.EPSILON</span> <span class="pre">=.220446049250313e-16</span></code> is
added to ES6, which is about 0.00000000000000022204.
<code class="docutils literal notranslate"><span class="pre">Number.EPSILON</span></code> is used to determine the calculation error of
floating-point numbers. If the calculation error of floating-point
numbers is less than or equal to the value of <code class="docutils literal notranslate"><span class="pre">Number.EPSILON</span></code>,
such an error is acceptable. The sample code is as follows:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">isNumberEquals</span><span class="p">(</span><span class="nx">one</span><span class="p">,</span> <span class="nx">other</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">one</span> <span class="o">-</span> <span class="nx">other</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">Number</span><span class="p">.</span><span class="nx">EPSILON</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">one</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">other</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isNumberEquals</span><span class="p">(</span><span class="nx">one</span><span class="p">,</span> <span class="nx">other</span><span class="p">));</span> <span class="c1">// Output: true</span>
</pre></div>
</div>
</li>
<li><p>Use some class library methods that support precise calculation, such
as <code class="docutils literal notranslate"><span class="pre">math.js</span></code>.</p></li>
</ol>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/mathjs/5.0.0/math.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
      <span class="kd">function</span> <span class="nx">fn_click</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">math</span><span class="p">.</span><span class="nx">config</span><span class="p">({</span>
          <span class="nx">number</span><span class="o">:</span> <span class="s2">&quot;BigNumber&quot;</span><span class="p">,</span>
        <span class="p">});</span>
        <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">math</span><span class="p">.</span><span class="nx">bignumber</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span> <span class="nx">math</span><span class="p">.</span><span class="nx">bignumber</span><span class="p">(</span><span class="mf">0.2</span><span class="p">));</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;mathjs(0.1+0.2)&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;fn_click();&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="suggestion-3-15-do-not-use-the-array-constructor-with-variable-arguments">
<h4>Suggestion 3.15 Do not use the array constructor with variable arguments.<a class="headerlink" href="#suggestion-3-15-do-not-use-the-array-constructor-with-variable-arguments" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> The method of constructor <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Array</span></code> is not recommended to
construct a new array. If the constructor has only one parameter,
exceptions may occur. In addition, the global definition of the array
may be modified. Therefore, it is recommended to use the array literal
notation, that is, <code class="docutils literal notranslate"><span class="pre">[]</span></code> notation, to create an array.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">arr1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">arr2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">arr3</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">x1</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">arr4</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span>
</pre></div>
</div>
<p>Except for the third case, all other functions can work properly. If
<code class="docutils literal notranslate"><span class="pre">x1</span></code> is an integer, <code class="docutils literal notranslate"><span class="pre">arr3</span></code> is an array whose length is <code class="docutils literal notranslate"><span class="pre">x1</span></code> and
values are <code class="docutils literal notranslate"><span class="pre">undefined</span></code>. If <code class="docutils literal notranslate"><span class="pre">x1</span></code> is any other number, an exception is
thrown, and if it is anything else, it is an array of cells.</p>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">arr1</span> <span class="o">=</span> <span class="p">[</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">];</span>
<span class="kr">const</span> <span class="nx">arr2</span> <span class="o">=</span> <span class="p">[</span><span class="nx">x1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">];</span>
<span class="kr">const</span> <span class="nx">arr3</span> <span class="o">=</span> <span class="p">[</span><span class="nx">x1</span><span class="p">];</span>
<span class="kr">const</span> <span class="nx">arr4</span> <span class="o">=</span> <span class="p">[];</span>
</pre></div>
</div>
<p>This way, you’ll save a lot of trouble.</p>
<p>Similarly, use <code class="docutils literal notranslate"><span class="pre">{}</span></code> instead of <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Object()</span></code> to create objects.</p>
</div>
<div class="section" id="rule-3-16-string-templates-are-preferred-over-string-links-when-constructing-strings">
<h4>Rule 3.16 String templates are preferred over string links when constructing strings.<a class="headerlink" href="#rule-3-16-string-templates-are-preferred-over-string-links-when-constructing-strings" title="Permalink to this headline">¶</a></h4>
<p><strong>Note:</strong> The template character strings are more concise and readable.</p>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">sayHi</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;hi, &#39;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">sayHi</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`hi, </span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rule-3-17-use-for-of-for-array-traversal-and-for-in-for-object-traversal">
<h4>Rule 3.17 Use <code class="docutils literal notranslate"><span class="pre">for...of</span></code> for array traversal and <code class="docutils literal notranslate"><span class="pre">for...in</span></code> for object traversal.<a class="headerlink" href="#rule-3-17-use-for-of-for-array-traversal-and-for-in-for-object-traversal" title="Permalink to this headline">¶</a></h4>
<p><strong>Counterexample:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">number</span> <span class="k">in</span> <span class="nx">numbers</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// sum === 00123;</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">,</span> <span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">number</span> <span class="k">of</span> <span class="nx">numbers</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// sum === 10</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/contribute/OpenHarmony-JavaScript-coding-style-guide.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
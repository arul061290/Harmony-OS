
<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SPI &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="spi">
<h1>SPI<a class="headerlink" href="#spi" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2><strong>Overview</strong><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Defines standard APIs of the Serial Peripheral Interface (SPI)
capabilities.</p>
<p>The SPI module abstracts the SPI capabilities of different system
platforms to provide stable APIs for driver development. This module can
create and destroy SPI device handles, read and write SPI data, and
obtain and set configuration parameters.</p>
<p><strong>Since:</strong></p>
<p>1.0</p>
</div>
<div class="section" id="summary">
<h2><strong>Summary</strong><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="files">
<h2>Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
<table><thead align="left"><tr id="row123239929093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p857345809093521"><p>File Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p250557065093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row832581783093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1567596929093521"><p>spi_if.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p2072162661093521"><p>Defines standard SPI-specific interfaces for driver development.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="data-structures">
<h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<table><thead align="left"><tr id="row884264732093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p2017062135093521"><p>Data Structure Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p2002391681093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row632433589093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1518776404093521"><p>SpiDevInfo</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p993777040093521"><p>Defines the general SPI device descriptor, which can be used as the
unique identifier of an SPI device. When operating an SPI device, you
need to specify a descriptor of the SpiDevInfo type, and obtain the
handle of the SPI device by calling SpiOpen.</p>
</p></td></tr><tr id="row1603881184093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p870128074093521"><p>SpiMsg</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p65176484093521"><p>Defines the custom SPI transfer message.</p>
</p></td></tr><tr id="row1257319220093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1403817877093521"><p>SpiCfg</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1913295415093521"><p>Defines the configuration of an SPI device.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="macros">
<h2>Macros<a class="headerlink" href="#macros" title="Permalink to this headline">¶</a></h2>
<table><thead align="left"><tr id="row558238895093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1214294220093521"><p>Macro Name and Value</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1341288115093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row25969202093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p323664500093521"><p>SPI_CLK_PHASE (1 &lt;&lt; 0)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p434607306093521"><p>Indicates the SPI clock phase. The value 0 indicates that data will be
sampled on the first clock edge, and 1 indicates that data will be
sampled on the second clock edge.</p>
</p></td></tr><tr id="row107564379093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p292217180093521"><p>SPI_CLK_POLARITY (1 &lt;&lt; 1)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p924887278093521"><p>Indicates the SPI clock polarity. The value 0 indicates a low-level
clock signal in the idle state, and 1 indicates a high-level clock
signal in the idle state.</p>
</p></td></tr><tr id="row1211187689093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2146564051093521"><p>SPI_MODE_3WIRE (1 &lt;&lt; 2)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p599309924093521"><p>Indicates that a single data line is used for both input and output.</p>
</p></td></tr><tr id="row2102523282093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1957541920093521"><p>SPI_MODE_LOOP (1 &lt;&lt; 3)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p786485675093521"><p>Indicates the SPI loopback mode.</p>
</p></td></tr><tr id="row667241970093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p591853316093521"><p>SPI_MODE_LSBFE (1 &lt;&lt; 4)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p657889638093521"><p>Indicates the SPI data transfer order. The value 0 indicates that data
is transferred from the most significant bit (MSB) to the least
significant bit (LSB), and 1 indicates the opposite.</p>
</p></td></tr><tr id="row144185880093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p415345044093521"><p>SPI_MODE_NOCS (1 &lt;&lt; 5)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p2033314316093521"><p>Indicates that there is only one SPI device, and no chip select (CS) is
required.</p>
</p></td></tr><tr id="row1168189513093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p990753061093521"><p>SPI_MODE_CS_HIGH (1 &lt;&lt; 6)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1688748400093521"><p>Indicates that the CS level is high when an SPI device is selected.</p>
</p></td></tr><tr id="row1011753813093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2005910580093521"><p>SPI_MODE_READY (1 &lt;&lt; 7)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1195358890093521"><p>Indicates that the SPI device is set to low for pausing data transfer.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="enumerations">
<h2>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this headline">¶</a></h2>
<table><thead align="left"><tr id="row256004643093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1899224769093521"><p>Enumeration Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1447184106093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1356220970093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1863174034093521"><p>SpiTransferMode { SPI_INTERRUPT_TRANSFER = 0, SPI_POLLING_TRANSFER,
SPI_DMA_TRANSFER }</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1424566176093521"><p>Enumerates transfer modes of SPI data.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<table><thead align="left"><tr id="row1057043327093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1490303513093521"><p>Function Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p265862611093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row571923097093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p876966305093521"><p>SpiOpen (const struct SpiDevInfo *info)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1682823309093521"><p>struct DevHandle *</p>
</p><p id="p1724341027093521"><p>Obtains the handle of an SPI device.</p>
</p></td></tr><tr id="row1730686649093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p679681923093521"><p>SpiClose (struct DevHandle *handle)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1533677590093521"><p>void</p>
</p><p id="p1651660442093521"><p>Releases the handle of an SPI device.</p>
</p></td></tr><tr id="row1575128146093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1437776492093521"><p>SpiTransfer (struct DevHandle <em>handle, struct SpiMsg</em>msgs, uint32_t
count)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1854945904093521"><p>int32_t</p>
</p><p id="p1417616247093521"><p>Launches a custom transfer to an SPI device.</p>
</p></td></tr><tr id="row694095350093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1915010039093521"><p>SpiRead (struct DevHandle <em>handle, uint8_t</em>buf, uint32_t len)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p2079029403093521"><p>int32_t</p>
</p><p id="p34931560093521"><p>Reads data of a specified length from an SPI device.</p>
</p></td></tr><tr id="row826964375093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2030996491093521"><p>SpiWrite (struct DevHandle <em>handle, uint8_t</em>buf, uint32_t len)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p2113890420093521"><p>int32_t</p>
</p><p id="p1517945831093521"><p>Writes data of a specified length to an SPI device.</p>
</p></td></tr><tr id="row1246394340093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p585380539093521"><p>SpiSetCfg (struct DevHandle <em>handle, struct SpiCfg</em>cfg)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p159346474093521"><p>int32_t</p>
</p><p id="p93991276093521"><p>Sets configuration parameters for an SPI device.</p>
</p></td></tr><tr id="row890471965093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2123119572093521"><p>SpiGetCfg (struct DevHandle <em>handle, struct SpiCfg</em>cfg)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1146571188093521"><p>int32_t</p>
</p><p id="p494787072093521"><p>Obtains the configuration parameters of an SPI device.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="details">
<h2><strong>Details</strong><a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="macro-definition-documentation">
<h2><strong>Macro Definition Documentation</strong><a class="headerlink" href="#macro-definition-documentation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="spi-clk-phase">
<h2>SPI_CLK_PHASE<a class="headerlink" href="#spi-clk-phase" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define SPI_CLK_PHASE   (1 &lt;&lt; 0)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Indicates the SPI clock phase. The value <strong>0</strong> indicates that data will
be sampled on the first clock edge, and <strong>1</strong> indicates that data will
be sampled on the second clock edge.</p>
</div>
<div class="section" id="spi-clk-polarity">
<h2>SPI_CLK_POLARITY<a class="headerlink" href="#spi-clk-polarity" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define SPI_CLK_POLARITY   (1 &lt;&lt; 1)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Indicates the SPI clock polarity. The value <strong>0</strong> indicates a low-level
clock signal in the idle state, and <strong>1</strong> indicates a high-level clock
signal in the idle state.</p>
</div>
<div class="section" id="spi-mode-3wire">
<h2>SPI_MODE_3WIRE<a class="headerlink" href="#spi-mode-3wire" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define SPI_MODE_3WIRE   (1 &lt;&lt; 2)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Indicates that a single data line is used for both input and output.</p>
</div>
<div class="section" id="spi-mode-cs-high">
<h2>SPI_MODE_CS_HIGH<a class="headerlink" href="#spi-mode-cs-high" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define SPI_MODE_CS_HIGH   (1 &lt;&lt; 6)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Indicates that the CS level is high when an SPI device is selected.</p>
</div>
<div class="section" id="spi-mode-loop">
<h2>SPI_MODE_LOOP<a class="headerlink" href="#spi-mode-loop" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define SPI_MODE_LOOP   (1 &lt;&lt; 3)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Indicates the SPI loopback mode.</p>
</div>
<div class="section" id="spi-mode-lsbfe">
<h2>SPI_MODE_LSBFE<a class="headerlink" href="#spi-mode-lsbfe" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define SPI_MODE_LSBFE   (1 &lt;&lt; 4)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Indicates the SPI data transfer order. The value <strong>0</strong> indicates that
data is transferred from the most significant bit (MSB) to the least
significant bit (LSB), and <strong>1</strong> indicates the opposite.</p>
</div>
<div class="section" id="spi-mode-nocs">
<h2>SPI_MODE_NOCS<a class="headerlink" href="#spi-mode-nocs" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define SPI_MODE_NOCS   (1 &lt;&lt; 5)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Indicates that there is only one SPI device, and no chip select (CS) is
required.</p>
</div>
<div class="section" id="spi-mode-ready">
<h2>SPI_MODE_READY<a class="headerlink" href="#spi-mode-ready" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define SPI_MODE_READY   (1 &lt;&lt; 7)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Indicates that the SPI device is set to low for pausing data transfer.</p>
</div>
<div class="section" id="enumeration-type-documentation">
<h2><strong>Enumeration Type Documentation</strong><a class="headerlink" href="#enumeration-type-documentation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="spitransfermode">
<h2>SpiTransferMode<a class="headerlink" href="#spitransfermode" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">enum</span> <span class="p">[</span><span class="n">SpiTransferMode</span><span class="p">](</span><span class="n">spi</span><span class="o">.</span><span class="n">md</span><span class="c1">#ga55946d1d895fc2b7b33007019de1668f)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Enumerates transfer modes of SPI data.</p>
<p><strong>Attention:</strong></p>
<p>The specific SPI controller determines which variables in this structure
are supported.</p>
<table><thead align="left"><tr id="row733783370093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1335312882093521"><p>Enumerator</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1458815782093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row784090506093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>SPI_INTERRUPT_TRANSFER</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1445753727093521"><p>Interrupt transfer mode</p>
</p></td></tr><tr id="row1136191175093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>SPI_POLLING_TRANSFER</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1043940948093521"><p>Polling transfer mode</p>
</p></td></tr><tr id="row88084506093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>SPI_DMA_TRANSFER</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1550440752093521"><p>Direct Memory Access (DMA) transfer mode</p>
</p></td></tr></tbody></table></div>
<div class="section" id="function-documentation">
<h2><strong>Function Documentation</strong><a class="headerlink" href="#function-documentation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="spiclose">
<h2>SpiClose()<a class="headerlink" href="#spiclose" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">SpiClose</span> <span class="p">(</span><span class="n">struct</span> <span class="p">[</span><span class="n">DevHandle</span><span class="p">](</span><span class="n">devhandle</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Releases the handle of an SPI device.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1386553696093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1244209033093521"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1248658544093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row523506989093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>handle</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the SPI device handle obtained via SpiOpen.</p>
</td></tr></tbody></table></div>
<div class="section" id="spigetcfg">
<h2>SpiGetCfg()<a class="headerlink" href="#spigetcfg" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">int32_t</span> <span class="n">SpiGetCfg</span> <span class="p">(</span><span class="n">struct</span> <span class="p">[</span><span class="n">DevHandle</span><span class="p">](</span><span class="n">devhandle</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">handle</span><span class="p">,</span> <span class="n">struct</span> <span class="p">[</span><span class="n">SpiCfg</span><span class="p">](</span><span class="n">spicfg</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">cfg</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Obtains the configuration parameters of an SPI device.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1756647455093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p477239580093521"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p490894048093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row789553538093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>handle</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the SPI device handle obtained via SpiOpen.</p>
</td></tr><tr id="row23223691093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>cfg</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the configuration parameters.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if the operation is successful; returns a negative value
otherwise.</p>
</div>
<div class="section" id="spiopen">
<h2>SpiOpen()<a class="headerlink" href="#spiopen" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="p">[</span><span class="n">DevHandle</span><span class="p">](</span><span class="n">devhandle</span><span class="o">.</span><span class="n">md</span><span class="p">)</span><span class="o">*</span> <span class="n">SpiOpen</span> <span class="p">(</span><span class="n">const</span> <span class="n">struct</span> <span class="p">[</span><span class="n">SpiDevInfo</span><span class="p">](</span><span class="n">spidevinfo</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">info</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Obtains the handle of an SPI device.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1254385303093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1055151799093521"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1443218514093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1790595143093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>info</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the SPI device information.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns the pointer to the handle of the SPI device if the operation is
successful; returns <strong>NULL</strong> otherwise.</p>
</div>
<div class="section" id="spiread">
<h2>SpiRead()<a class="headerlink" href="#spiread" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">int32_t</span> <span class="n">SpiRead</span> <span class="p">(</span><span class="n">struct</span> <span class="p">[</span><span class="n">DevHandle</span><span class="p">](</span><span class="n">devhandle</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">handle</span><span class="p">,</span> <span class="n">uint8_t</span> <span class="o">*</span> <span class="n">buf</span><span class="p">,</span> <span class="n">uint32_t</span> <span class="nb">len</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Reads data of a specified length from an SPI device.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row468473702093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p618741833093521"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1061312265093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row423561892093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>handle</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the SPI device handle obtained via SpiOpen.</p>
</td></tr><tr id="row726048780093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>buf</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the buffer for receiving the data.</p>
</td></tr><tr id="row1002855703093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>len</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the length of the data to read.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if the operation is successful; returns a negative value
otherwise.</p>
</div>
<div class="section" id="spisetcfg">
<h2>SpiSetCfg()<a class="headerlink" href="#spisetcfg" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">int32_t</span> <span class="n">SpiSetCfg</span> <span class="p">(</span><span class="n">struct</span> <span class="p">[</span><span class="n">DevHandle</span><span class="p">](</span><span class="n">devhandle</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">handle</span><span class="p">,</span> <span class="n">struct</span> <span class="p">[</span><span class="n">SpiCfg</span><span class="p">](</span><span class="n">spicfg</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">cfg</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Sets configuration parameters for an SPI device.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1273019704093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p469736465093521"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p245526202093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row484824111093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>handle</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the SPI device handle obtained via SpiOpen.</p>
</td></tr><tr id="row282679029093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>cfg</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the configuration parameters.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if the operation is successful; returns a negative value
otherwise.</p>
</div>
<div class="section" id="spitransfer">
<h2>SpiTransfer()<a class="headerlink" href="#spitransfer" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">int32_t</span> <span class="n">SpiTransfer</span> <span class="p">(</span><span class="n">struct</span> <span class="p">[</span><span class="n">DevHandle</span><span class="p">](</span><span class="n">devhandle</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">handle</span><span class="p">,</span> <span class="n">struct</span> <span class="p">[</span><span class="n">SpiMsg</span><span class="p">](</span><span class="n">spimsg</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">msgs</span><span class="p">,</span> <span class="n">uint32_t</span> <span class="n">count</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Launches a custom transfer to an SPI device.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1757939666093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1831031926093521"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p808152174093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row480462019093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>handle</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the SPI device handle obtained via SpiOpen.</p>
</td></tr><tr id="row1604466317093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>msgs</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the data to transfer.</p>
</td></tr><tr id="row1029134741093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>count</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the length of the message structure array.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if the operation is successful; returns a negative value
otherwise.</p>
<p><strong>See also:</strong></p>
<p><a class="reference external" href="spimsg.md">SpiMsg</a></p>
</div>
<div class="section" id="spiwrite">
<h2>SpiWrite()<a class="headerlink" href="#spiwrite" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">int32_t</span> <span class="n">SpiWrite</span> <span class="p">(</span><span class="n">struct</span> <span class="p">[</span><span class="n">DevHandle</span><span class="p">](</span><span class="n">devhandle</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">handle</span><span class="p">,</span> <span class="n">uint8_t</span> <span class="o">*</span> <span class="n">buf</span><span class="p">,</span> <span class="n">uint32_t</span> <span class="nb">len</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Writes data of a specified length to an SPI device.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1975240830093521"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p321836971093521"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1467184158093521"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row124677265093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>handle</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the SPI device handle obtained via SpiOpen.</p>
</td></tr><tr id="row1765608993093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>buf</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the data to write.</p>
</td></tr><tr id="row991123733093521"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>len</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the length of the data to write.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if the operation is successful; returns a negative value
otherwise.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/api/api-SmartVision-Devices/spi.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
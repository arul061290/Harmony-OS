
<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Overview &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-concepts">
<h2>Basic Concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline">¶</a></h2>
<p>Camera is one of the services provided by the OpenHarmony multimedia
subsystem. The camera module provides recording, preview, and
photographing features and supports concurrent stream reading by
multiple users.</p>
<p>It is considered good practice that you understand the following
concepts before starting development:</p>
<ul>
<li><p>Video frame</p>
<p>A video frame is formed by the stream data of a video image. Video
data streams are formed by a series of image data arranged at a fixed
time interval.</p>
</li>
<li><p>Frame per second (FPS)</p>
<p>FPS is used to represent the frame rate at which images are refreshed
during video playback, or the number of frames per second during
video playback. A higher frame rate means smoother video playback.</p>
</li>
<li><p>Resolution</p>
<p>Information about each image frame consists of pixels. The number of
pixels in an image is presented by the resolution. For example, 1080p
(1920 x 1080) indicates that the image width is 1920 pixels and the
image height is 1080 pixels.</p>
</li>
</ul>
</div>
<div class="section" id="working-principles">
<h2>Working Principles<a class="headerlink" href="#working-principles" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Multimedia services</p>
<p>Multimedia services are started by the <strong>Init</strong> process upon system
startup, and media hardware resources (such as memory, display
hardware, image sensors, and codecs) are initialized and allocated.
During the initialization, the configuration file is parsed, which
determines the upper limit of capabilities and resources of each
service. Generally, the upper limit is configured by original
equipment manufacturers (OEMs) in the configuration file. The
following configuration items are available for the camera service
during multimedia service initialization:</p>
<ul class="simple">
<li><p>Memory pool: Memory blocks in the memory pool are accessed and
released continuously by all multimedia services.</p></li>
<li><p>Image sensor: sensor type, resolution, ISP, and more</p></li>
<li><p>Image processor: resolution, bit rate, image inversion, and more</p></li>
<li><p>Image encoder: encoding format, bit rate, resolution, and more</p></li>
</ul>
</li>
<li><p>Major classes</p>
<p>You can use the <strong>Camera</strong> class and its asynchronous callback
classes to configure and access the camera functionalities. The three
callback classes correspond to different asynchronous processing
scenarios, as described in <a class="reference external" href="#table486418149411">Table 1</a>.</p>
<p><strong>Table 1</strong> Class description</p>
<table><thead align="left"><tr id="row19864414104115"><th class="cellrowborder" valign="top" width="22.322232223222326%" id="mcps1.2.4.1.1"><p id="p128641914114112"><p>Class</p>
</p></th><th class="cellrowborder" valign="top" width="44.34443444344435%" id="mcps1.2.4.1.2"><p id="p1386471410411"><p>Description</p>
</p></th><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p1486541484116"><p>Examples</p>
</p></th></tr></thead><tbody><tr id="row138651914104113"><td class="cellrowborder" valign="top" width="22.322232223222326%" headers="mcps1.2.4.1.1 "><p id="p1886515147416"><p>Camera</p>
</p></td><td class="cellrowborder" valign="top" width="44.34443444344435%" headers="mcps1.2.4.1.2 "><p id="p48653148414"><p>Configures the static camera capability through the configuration
class to use basic camera functionalities.</p>
</p></td><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p986510145416"><p>Photographing, video recording, and previewing</p>
</p></td></tr><tr id="row98656144413"><td class="cellrowborder" valign="top" width="22.322232223222326%" headers="mcps1.2.4.1.1 "><p id="p13865161412412"><p>CameraDeviceCallback</p>
</p></td><td class="cellrowborder" valign="top" width="44.34443444344435%" headers="mcps1.2.4.1.2 "><p id="p1986517141413"><p>Handles camera hardware state changes.</p>
</p></td><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p286531413419"><p>Available or unavailable</p>
</p></td></tr><tr id="row167872310411"><td class="cellrowborder" valign="top" width="22.322232223222326%" headers="mcps1.2.4.1.1 "><p id="p196793230419"><p>CameraStateCallback</p>
</p></td><td class="cellrowborder" valign="top" width="44.34443444344435%" headers="mcps1.2.4.1.2 "><p id="p14679823144110"><p>Handles camera instance state changes.</p>
</p></td><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p6679102354112"><p>Created or released</p>
</p></td></tr><tr id="row886581414118"><td class="cellrowborder" valign="top" width="22.322232223222326%" headers="mcps1.2.4.1.1 "><p id="p1865614194116"><p>FrameStateCallback</p>
</p></td><td class="cellrowborder" valign="top" width="44.34443444344435%" headers="mcps1.2.4.1.2 "><p id="p1865171420410"><p>Handles frame status changes.</p>
</p></td><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p486541444119"><p>Start and end of photographing, and frame rate changes</p>
</p></td></tr></tbody></table></li>
<li><p>Stream transfer</p>
<p>A surface is the basic data structure for transferring audio and
video data. A camera is generally used as the data producer of a
surface and has specific consumers in different scenarios.</p>
<p>Camera preview and recording outputs are video streams, and
photographing outputs are image frames. The outputs are transferred
through the <strong>Surface</strong> class. A surface can transmit media
information streams within and cross processes.</p>
<p>Take video recording as an example. You create a <strong>Recorder</strong>
instance, obtain the surface of the <strong>Recorder</strong> instance, and then
transfer the surface to the <strong>Camera</strong> instance. In this case, the
<strong>Camera</strong> instance works as a producer to inject video streams to
the surface, and the <strong>Recorder</strong> instance act as the consumer to
obtain video streams from the surface for storage. In this case, you
connect the recorder and camera through the surface.</p>
<p>Similarly, you can create a surface, implement consumer logic for it,
and transfer it to the <strong>Camera</strong> instance. For example, transmit
video streams over the network or save captured frame data as an
image file.</p>
<p>The graphics module also obtains stream resources from the camera
module through surfaces. For details, see development guidelines on
<a class="reference external" href="graphics.md">Graphic</a>.</p>
</li>
<li><p>Camera running process</p>
<ol class="arabic">
<li><p>Creating a camera</p>
<p>This process creates a <strong>Camera</strong> instance by <strong>CameraManager</strong>,
binds the camera device to the server, and asynchronously notifies
you of the successful creation. The following figure shows the
time sequence between classes.</p>
<p><strong>Figure 1</strong> Sequence diagram for creating a camera</p>
<p><img alt="image1" src="../_images/en-us_image_0000001054101094.png" /></p>
</li>
<li><p>Taking a video/Previewing</p>
<p>This process creates a <strong>Camera</strong> instance via <strong>CameraKit</strong>, and
configures frame attributes via <strong>FrameConfig</strong> for recording or
previewing. The following figure shows the time sequence.</p>
<p><strong>Figure 2</strong> Sequence diagram for recording/previewing</p>
<p><img alt="image2" src="../_images/en-us_image_0000001054421113.png" /></p>
</li>
</ol>
</li>
</ul>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/subsystems/overview.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>

<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bundle Management &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="bundle-management">
<h1>Bundle Management<a class="headerlink" href="#bundle-management" title="Permalink to this headline">¶</a></h1>
<div class="section" id="dependency">
<h2>Dependency<a class="headerlink" href="#dependency" title="Permalink to this headline">¶</a></h2>
<p>A basic <strong>bundle.json</strong> file needs to be enriched by bundle dependencies
to implement more complex features. Bundle names and version numbers
should be defined in the <strong>dependencies</strong> field of <strong>bundle.json</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my-bundle&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;net&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example, <strong>my-bundle</strong> depends on <strong>net 1.0.0</strong>. After you
globally install the hpm-cli tool, run the following command to obtain
bundle dependencies from the remote repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hpm</span> <span class="n">install</span>
</pre></div>
</div>
<p>Bundle dependencies are then stored in the <strong>ohos_bundles</strong> folder in
the root directory of the current bundle. A tree structure illustrating
the bundle and its dependencies will be generated. You need to run the
following command in the root directory of the bundle:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>username@server MINGW64 /f/showcase/demo/demo
$ hpm list
+--demo@1.0.0
| +--@huawei/media@1.0.2
| +--@demo/sport_hi3518ev300_liteos_a@1.0.0
| | +--@demo/app@4.0.1
| | | +--@demo/build@4.0.1
| | | +--@demo/arm_harmonyeabi_gcc@4.0.0
| | +--@demo/liteos_a@4.0.0
| | | +--@demo/third_party_fatfs@4.0.0
| | | +--@demo/arm_harmonyeabi_gcc@4.0.0
| | +--@demo/init@4.0.0
| | +--@demo/dist_tools@4.0.0
</pre></div>
</div>
<p>Alternatively, you can view the dependencies of the current bundle in a
graph by running the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hpm</span> <span class="n">dependencies</span>
</pre></div>
</div>
<p>A <strong>deps_visual</strong> folder is generated in the current directory. The
folder contains the <strong>deps.html</strong> and <strong>deps-data.js</strong> files. After you
open the <strong>deps.html</strong> file via a browser, you can view bundle
dependencies illustrated by a graph, as shown in the following figure.</p>
<p>Each dependency type is indicated by a different color at the
corresponding node. You can move the mouse pointer to a node to view the
implied information.</p>
<div class="line-block">
<div class="line"><strong>Figure 1</strong> Bundle dependencies</div>
<div class="line"><img alt="image1" src="../_images/bundle-dependencies.png" /></div>
</div>
</div>
<div class="section" id="hpm-command-reference">
<h2>HPM Command Reference<a class="headerlink" href="#hpm-command-reference" title="Permalink to this headline">¶</a></h2>
<p>You can use the hpm-cli tool to manage the lifecycle of a bundle. The
following table describes available HPM commands. (You can run the <strong>hpm
-h</strong> command to get the command details).</p>
<p><strong>Table 1</strong> HPM commands</p>
<table><thead align="left"><tr id="row125101745103718"><th class="cellrowborder" valign="top" width="20.95209520952095%" id="mcps1.2.4.1.1"><p id="p1451014454371"><p>Function</p>
</p></th><th class="cellrowborder" valign="top" width="30.623062306230626%" id="mcps1.2.4.1.2"><p id="p17510144553716"><p>Command</p>
</p></th><th class="cellrowborder" valign="top" width="48.42484248424842%" id="mcps1.2.4.1.3"><p id="p65102452371"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row25106453375"><td class="cellrowborder" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p151044514378"><p>Querying version information</p>
</p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p1653795113472"><p>hpm -V or hpm –version</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p399295684713"><p>Queries the hpm-cli version number.</p>
</p></td></tr><tr id="row651017455374"><td class="cellrowborder" rowspan="2" align="left" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p551054516372"><p>Querying help information</p>
</p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p18648167124812"><p>hpm -h or hpm –version</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p1464811794817"><p>Queries the command list and help information.</p>
</p></td></tr><tr id="row1751016452379"><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.1 "><p id="p16778111111487"><p>hpm -h</p>
</p></td><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.2 "><p id="p1877811154818"><p>Queries command reference.</p>
</p></td></tr><tr id="row2511945123715"><td class="cellrowborder" rowspan="2" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p3955174864810"><p>Creating a project</p>
</p><p id="p14511184518374"></p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p2046811558481"><p>hpm init bundle</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p1646818557481"><p>Creates a bundle project.</p>
</p></td></tr><tr id="row351184593713"><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.1 "><p id="p18991313496"><p>hpm init -t template</p>
</p></td><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.2 "><p id="p109912104911"><p>Creates a scaffolding project based on the template.</p>
</p></td></tr><tr id="row1751164511374"><td class="cellrowborder" rowspan="2" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p1351111454374"><p>Installing bundles</p>
</p><p id="p251144513715"></p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p8896182914913"><p>hpm install or hpm i</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p1289692919493"><p>Installs dependent bundles in the bundle.json file.</p>
</p></td></tr><tr id="row15511194563712"><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.1 "><p id="p17917436134911"><p>hpm install <a class="reference external" href="mailto:bundle&#37;&#52;&#48;version">bundle<span>&#64;</span>version</a></p>
</p></td><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.2 "><p id="p1891723611494"><p>Installs bundles of a specified version.</p>
</p></td></tr><tr id="row21051110155011"><td class="cellrowborder" rowspan="2" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p1630384435010"><p>Uninstalling bundles</p>
</p><p id="p83417161509"></p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p288195017502"><p>hpm uninstall bundle</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p2088450165014"><p>Removes dependent bundles.</p>
</p></td></tr><tr id="row73341617507"><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.1 "><p id="p934161613508"><p>hpm remove or hpm rm bundlename</p>
</p></td><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.2 "><p id="p234111685016"><p>Removes dependent bundles.</p>
</p></td></tr><tr id="row166449214501"><td class="cellrowborder" rowspan="2" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p8645421125016"><p>Viewing information</p>
</p><p id="p12645202115014"></p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p679412535211"><p>hpm list or hpm ls</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p07941451526"><p>Displays the bundle tree of available bundles and distributions.</p>
</p></td></tr><tr id="row1764552105017"><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.1 "><p id="p035818131525"><p>hpm dependencies</p>
</p></td><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.2 "><p id="p19358413135217"><p>Generates the dependency diagram (in HTML format) of available bundles
and distributions.</p>
</p></td></tr><tr id="row1553428145020"><td class="cellrowborder" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p353202845014"><p>Searching for bundles</p>
</p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p1423903005211"><p>hpm search name</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p17239163018524"><p>Searches for bundles. –json is used to specify the search result in JSON
format, and -type is used to set the target type, which can be bundle,
distribution, or code-segment.</p>
</p></td></tr><tr id="row135482855018"><td class="cellrowborder" rowspan="2" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p38201311174016"><p>Setting HPM configuration items</p>
</p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p279915013522"><p>hpm config set key value</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p157991450205211"><p>Sets configuration items, such as the server address and network proxy.</p>
</p></td></tr><tr id="row454172810509"><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.1 "><p id="p111125615215"><p>hpm config delete key</p>
</p></td><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.2 "><p id="p171156105215"><p>Deletes configurations.</p>
</p></td></tr><tr id="row3925233115011"><td class="cellrowborder" rowspan="2" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p1250314020555"><p>Updating bundle versions</p>
</p><p id="p59251633105018"></p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p1127981305516"><p>hpm update</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p427971311555"><p>Updates the versions of dependent bundles.</p>
</p></td></tr><tr id="row692503385015"><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.1 "><p id="p627961317557"><p>hpm check-update</p>
</p></td><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.2 "><p id="p3279121315557"><p>Checks whether version updates are available to dependent bundles.</p>
</p></td></tr><tr id="row1925173385019"><td class="cellrowborder" rowspan="2" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p2925133305014"><p>Building</p>
</p><p id="p692515335501"></p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p2058919655611"><p>hpm build</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p1958920625619"><p>Builds a bundle or distribution.</p>
</p></td></tr><tr id="row18925233115016"><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.1 "><p id="p1958912618563"><p>hpm dist</p>
</p></td><td class="cellrowborder" valign="top" headers="mcps1.2.4.1.2 "><p id="p2058936115611"><p>Packs a distribution, depending on the dist script in scripts of
bundle.json.</p>
</p></td></tr><tr id="row59261233155013"><td class="cellrowborder" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p3926123305011"><p>Packing</p>
</p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p1785810219574"><p>hpm pack</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p1485872165714"><p>Packs dependencies of local bundles.</p>
</p></td></tr><tr id="row1592653305016"><td class="cellrowborder" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p84251810125716"><p>Burning</p>
</p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p7973616175716"><p>hpm run flash</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p20973111612575"><p>Burns the firmware, depending on the flash script in scripts of
bundle.json.</p>
</p></td></tr><tr id="row992615339504"><td class="cellrowborder" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p1225172310576"><p>Publishing</p>
</p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p198081455105712"><p>hpm publish</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p880885516574"><p>Publishes a bundle, which must be unique in the repository and has a
unique version. (An account is required for login.)</p>
</p></td></tr><tr id="row5926333135014"><td class="cellrowborder" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p39267336504"><p>Running extended commands</p>
</p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p9933172588"><p>hpm run</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p18933476584"><p>Runs the commands in scripts defined in bundle.json. Multiple commands
can be executed in batches by using &amp;&amp;.</p>
</p></td></tr><tr id="row122864915206"><td class="cellrowborder" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p1529124912207"><p>Generating a key</p>
</p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p9291492204"><p>hpm gen-keys</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p429249182012"><p>Generates a public-private key pair and configures the public key on the
hpm server, achieving password-free hpm-cli login for bundle publishing.</p>
</p></td></tr><tr id="row3556450102011"><td class="cellrowborder" valign="top" width="20.95209520952095%" headers="mcps1.2.4.1.1 "><p id="p35561850172015"><p>Generating third-party open source notice</p>
</p></td><td class="cellrowborder" valign="top" width="30.623062306230626%" headers="mcps1.2.4.1.2 "><p id="p1155625018209"><p>hpm gen-notice</p>
</p></td><td class="cellrowborder" valign="top" width="48.42484248424842%" headers="mcps1.2.4.1.3 "><p id="p11557175015205"><p>Generates a joint file describing the notice on third-party open source
based on the description of each bundle.</p>
</p></td></tr></tbody></table></div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/bundles/bundle-management.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
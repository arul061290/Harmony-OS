
<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Distributed Scheduler &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="distributed-scheduler">
<h1>Distributed Scheduler<a class="headerlink" href="#distributed-scheduler" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The Distributed Scheduler is used for cross-device component management.
It allows the local device to access or control remote components, and
enables application collaboration in distributed scenarios. The
following figure shows the modules in the Distributed Scheduler.</p>
<p><img alt="image1" src="../_images/en-us_image_0000001055103250.png" /></p>
</div>
<div class="section" id="directory-structure">
<h2>Directory Structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h2>
<p>The following table describes the directory structure of the Distributed
Scheduler.</p>
<p><strong>Table 1</strong> Directory structure of the major source code</p>
<table><thead align="left"><tr id="row20416556201718"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p10416456121716"><p>Directory</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1841645631717"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row64161056151718"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p9416656181720"><p>dtbschedmgr_lite</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p541645611177"><p>Implementation of the Distributed Scheduler</p>
</p></td></tr><tr id="row104169564177"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p17416125614179"><p>safwk_lite</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p04163569170"><p>Implementation of the foundation process</p>
</p></td></tr></tbody></table><p>The source code directory structure of the Distributed Scheduler is as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── BUILD.gn
├── include
│  ├── distributed_schedule_service.h        # Header file for the open APIs provided by the Distributed Scheduler
│  ├── dmslite_check_remote_permission.h     # Header file for the permission management module of the Distributed Scheduler
│  ├── dmslite_famgr.h                       # Header file for the FA management module of the Distributed Scheduler
│  ├── dmslite_inner_common.h                # Internal common file for the Distributed Scheduler
│  ├── dmslite.h                             # Header file for the implementation of the Distributed Scheduler Service
│  ├── dmslite_log.h                         # Header file for the log module
│  ├── dmslite_msg_parser.h                  # Header file for the distributed message parsing module
│  ├── dmslite_tlv_common.h                  # Header file for the TLV data parsing module
│  └── dmslite_session.h                     # Header file for the inter-device communication module
├── readme.md
├── LICENSE
├── source
    ├── distributed_schedule_service.c
    ├── dmslite.c
    ├── dmslite_check_remote_permission.c
    ├── dmslite_famgr.c
    ├── dmslite_msg_parser.c
    ├── dmslite_tlv_common.c
    └── dmslite_session.c
</pre></div>
</div>
</div>
<div class="section" id="constraints">
<h2>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h2>
<p><strong>Language</strong>: C or C++</p>
<p><strong>Networking environment</strong>: The primary and secondary devices must be on
the same LAN and can ping each other.</p>
<p><strong>Operating system</strong>: OpenHarmony</p>
<p><strong>Limitations and constraints on remote startup</strong>:</p>
<ul class="simple">
<li><p>Only FAs can be started remotely. Remote startup is unavailable to
abilities using the Service template.</p></li>
<li><p>Before the remote startup, ensure that the distributed networking
between the primary and secondary devices is successful. Otherwise,
the remote startup fails.</p></li>
</ul>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Compiling the Distributed Scheduler</strong></p></li>
</ul>
<p>The code of the Distributed Scheduler is stored in the following
directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">foundation</span><span class="o">/</span><span class="n">distributedschedule</span><span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">dtbschedmgr_lite</span>
</pre></div>
</div>
<p>When compiling the code for a specific platform, you need to specify the
target platform. The following code snippet uses code compilation for
the Hi3516DV300 platform as an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">build</span><span class="o">.</span><span class="n">py</span> <span class="n">ipcamera</span> <span class="o">-</span><span class="n">p</span> <span class="n">hi3516dv300_liteos_a</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Primary device development</strong> (taking FA startup as an example)</p></li>
</ul>
<p>Create a <strong>Want</strong> instance to set the remote device ID, bundle name, and
ability class name of the target FA and set the
<strong>Want.FLAG_ABILITYSLICE_MULTI_DEVICE</strong> flag to enable distributed
startup.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ohos.aafwk.ability.Ability</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">ohos.aafwk.content.Want</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">ohos.bundle.ElementName</span><span class="p">;</span>

<span class="o">//</span> <span class="n">Create</span> <span class="n">a</span> <span class="n">Want</span> <span class="n">instance</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span> <span class="n">passed</span> <span class="n">to</span> <span class="n">the</span> <span class="n">startAbility</span> <span class="n">method</span><span class="o">.</span>
<span class="n">Want</span> <span class="n">want</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Want</span><span class="p">();</span>
<span class="n">ElementName</span> <span class="n">name</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ElementName</span><span class="p">(</span><span class="n">remote_device_id</span><span class="p">,</span> <span class="s2">&quot;com.huawei.remote_bundle_name&quot;</span><span class="p">,</span> <span class="s2">&quot;remote_ability_name&quot;</span><span class="p">);</span>
<span class="n">want</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="n">name</span><span class="p">);</span> <span class="o">//</span> <span class="n">Add</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">target</span> <span class="n">FA</span> <span class="k">for</span> <span class="n">startup</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Want</span> <span class="n">instance</span><span class="o">.</span>
<span class="n">want</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">Want</span><span class="o">.</span><span class="n">FLAG_ABILITYSLICE_MULTI_DEVICE</span><span class="p">);</span> <span class="o">//</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">multi</span><span class="o">-</span><span class="n">device</span> <span class="n">startup</span> <span class="n">flag</span><span class="o">.</span> <span class="n">If</span> <span class="n">this</span> <span class="n">flag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">,</span> <span class="n">remote</span> <span class="n">FA</span> <span class="n">startup</span> <span class="n">will</span> <span class="n">be</span> <span class="n">unavailable</span><span class="o">.</span>

<span class="o">//</span> <span class="n">Start</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">FA</span> <span class="n">on</span> <span class="n">the</span> <span class="n">secondary</span> <span class="n">device</span><span class="o">.</span>
<span class="n">startAbility</span><span class="p">(</span><span class="n">want</span><span class="p">);</span> <span class="o">//</span> <span class="n">Start</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">FA</span> <span class="n">based</span> <span class="n">on</span> <span class="n">the</span> <span class="n">want</span> <span class="n">parameter</span><span class="o">.</span> <span class="n">If</span> <span class="n">the</span> <span class="n">name</span> <span class="ow">and</span> <span class="nb">type</span> <span class="n">of</span> <span class="n">the</span> <span class="n">want</span> <span class="n">parameter</span> <span class="n">are</span> <span class="n">different</span> <span class="kn">from</span> <span class="nn">those</span> <span class="n">used</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">IDE</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="n">parameter</span> <span class="n">name</span> <span class="ow">and</span> <span class="nb">type</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">IDE</span><span class="o">.</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Prerequisites</strong></p></li>
</ul>
<p>The target FA with the specified bundle name must have been installed on
the secondary device.</p>
<ul class="simple">
<li><p><strong>Execution</strong> (taking FA startup as an example)</p></li>
</ul>
<p>Call the <strong>startAbility</strong> method on the primary device to start the
target FA on the secondary device.</p>
</div>
<div class="section" id="repositories-involved">
<h2>Repositories Involved<a class="headerlink" href="#repositories-involved" title="Permalink to this headline">¶</a></h2>
<p>distributedschedule_interfaces_kits_samgr_lite</p>
<p>distributedschedule_services_dtbschedmgr_lite</p>
<p>distributedschedule_services_safwk_lite</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/readme/distributed-scheduler.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
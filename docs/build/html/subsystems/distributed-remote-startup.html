
<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Distributed Remote Startup &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="distributed-remote-startup">
<h1>Distributed Remote Startup<a class="headerlink" href="#distributed-remote-startup" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The Distributed Manager Service sets up a distributed service platform
in OpenHarmony by using a proxy between the primary and secondary
devices. With the Distributed Manager Service, the primary device
(OpenHarmony-powered smart TV) can start a Feature Ability (FA) deployed
on the secondary device (a memory-constrained OpenHarmony device such as
an IP camera or a lite wearable).</p>
<p>For example, if a user presses the <strong>Remind Me</strong> button for a TV program
on the smart TV, the smart TV will start the corresponding reminder FA
on the lite wearable to remind the user when the particular TV program
is available.</p>
</div>
<div class="section" id="basic-concepts">
<h2>Basic Concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>FA</p>
<p>Feature Ability, representing an ability with a UI for interacting
with users</p>
</li>
<li><p>Remote startup</p>
<p>Cross-device FA startup, which is the counterpart of local FA startup</p>
</li>
</ul>
</div>
<div class="section" id="available-apis">
<h2>Available APIs<a class="headerlink" href="#available-apis" title="Permalink to this headline">¶</a></h2>
<p>The following table describes the API that can be used by smart TVs to
remotely start an FA. This API is provided in the <strong>AbilitySlice</strong>
class. For details, see the Java API reference for OpenHarmony
application development.</p>
<p><strong>Table 1</strong> API for remotely starting an FA on the distributed network</p>
<table><thead align="left"><tr id="row4419501537"><th class="cellrowborder" valign="top" width="57.38999999999999%" id="mcps1.2.3.1.1"><p id="p54150165315"><p>Method</p>
</p></th><th class="cellrowborder" valign="top" width="42.61%" id="mcps1.2.3.1.2"><p id="p941150145313"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row34145016535"><td class="cellrowborder" valign="top" width="57.38999999999999%" headers="mcps1.2.3.1.1 "><p id="p1682733119213"><p>void startAbility(Want want)</p>
</p></td><td class="cellrowborder" valign="top" width="42.61%" headers="mcps1.2.3.1.2 "><p id="p13562171015712"><p>Remotely starts an FA based on the specified Want information. If the
name and type of the want parameter are different from those used in the
integrated development environment (IDE), use the parameter name and
type in the IDE.</p>
</p></td></tr></tbody></table><p><strong>Table 2</strong> Description of the want parameter</p>
<table><thead align="left"><tr id="row172294315361"><th class="cellrowborder" valign="top" width="14.000000000000002%" id="mcps1.2.4.1.1"><p id="p722144318360"><p>Parameter</p>
</p></th><th class="cellrowborder" valign="top" width="17%" id="mcps1.2.4.1.2"><p id="p10227434363"><p>Type</p>
</p></th><th class="cellrowborder" valign="top" width="69%" id="mcps1.2.4.1.3"><p id="p22284383616"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row3228436365"><td class="cellrowborder" valign="top" width="14.000000000000002%" headers="mcps1.2.4.1.1 "><p id="p1391227193713"><p>want</p>
</p></td><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.4.1.2 "><p id="p20993611193719"><p>ohos.aafwk.content.Want</p>
</p></td><td class="cellrowborder" valign="top" width="69%" headers="mcps1.2.4.1.3 "><p id="p10555172211377"><p>When you use startAbility(Want want) to remotely start an FA, you must
first specify the deviceId, bundleName, and abilityName attributes of
the target FA in the Want object.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="limitations-and-constraints">
<h2>Limitations and Constraints<a class="headerlink" href="#limitations-and-constraints" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The primary device can remotely start an FA of the secondary device,
but the secondary device cannot remotely start an FA of the primary
device.</p></li>
<li><p>Before the remote startup, ensure that the two OpenHarmony devices
are on the same network segment and can ping each other on the
distributed network. Otherwise, the remote startup fails.</p></li>
<li><p>Currently, only the FAs that have the same public key (that is, the
same Huawei certificate) can be started between the primary and
secondary devices.</p></li>
</ul>
</div>
<div class="section" id="how-to-develop">
<h2>How to Develop<a class="headerlink" href="#how-to-develop" title="Permalink to this headline">¶</a></h2>
<p>To enable the primary device (smart TV) to start an FA of the secondary
device (assuming that the target FA has been developed), perform the
following steps:</p>
<ol class="arabic">
<li><p>Complete FA development for the smart TV on DevEco Studio.</p></li>
<li><p>Obtain the IDs of online secondary devices.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Import</span> <span class="n">the</span> <span class="n">header</span> <span class="n">files</span> <span class="n">required</span> <span class="k">for</span> <span class="n">device</span> <span class="n">selection</span><span class="o">.</span>
<span class="kn">import</span> <span class="nn">ohos.distributedschedule.interwork.DeviceInfo</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">ohos.distributedschedule.interwork.DeviceManager</span><span class="p">;</span>

<span class="o">//</span> <span class="n">Obtain</span> <span class="n">the</span> <span class="n">online</span> <span class="n">device</span> <span class="nb">list</span><span class="o">.</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">DeviceInfo</span><span class="o">&gt;</span> <span class="n">deviceInfoListOnline</span> <span class="o">=</span> <span class="n">DeviceManager</span><span class="o">.</span><span class="n">getDmsDeviceList</span><span class="p">(</span><span class="n">DeviceInfo</span><span class="o">.</span><span class="n">FLAG_GET_ONLINE_DEVICE</span><span class="p">);</span>
<span class="n">String</span> <span class="n">remote_device_id</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">deviceInfoListOnline</span><span class="o">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">remote_device_id</span> <span class="o">=</span> <span class="n">deviceInfoListOnline</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">GetDeviceId</span><span class="p">();</span> <span class="o">//</span> <span class="n">Obtain</span> <span class="n">the</span> <span class="n">ID</span> <span class="n">of</span> <span class="n">the</span> <span class="n">first</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">online</span> <span class="n">device</span> <span class="nb">list</span><span class="o">.</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Create a <strong>Want</strong> instance. You should first create an
<strong>ElementName</strong> object with <strong>deviceId</strong>, <strong>bundleName</strong>,
<strong>abilityName</strong> specified and add this object to the <strong>Want</strong>
instance. Then, set the multi-device startup flag
<strong>Want.FLAG_ABILITYSLICE_MULTI_DEVICE</strong> to the <strong>Want</strong> instance to
enable remote FA startup.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Import</span> <span class="n">related</span> <span class="n">header</span> <span class="n">files</span><span class="o">.</span>
<span class="kn">import</span> <span class="nn">ohos.aafwk.ability.Ability</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">ohos.aafwk.content.Want</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">ohos.bundle.ElementName</span><span class="p">;</span>

<span class="o">//</span> <span class="n">Start</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">FA</span> <span class="n">on</span> <span class="n">the</span> <span class="n">secondary</span> <span class="n">device</span><span class="o">.</span>
<span class="n">Want</span> <span class="n">want</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Want</span><span class="p">();</span> <span class="o">//</span> <span class="n">Create</span> <span class="n">a</span> <span class="n">Want</span> <span class="n">instance</span> <span class="n">that</span> <span class="n">encapsulates</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">FA</span> <span class="n">to</span> <span class="n">start</span><span class="o">.</span>
<span class="o">//</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">device</span> <span class="n">ID</span> <span class="n">obtained</span> <span class="ow">in</span> <span class="n">step</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">FA</span> <span class="n">information</span><span class="o">.</span>
<span class="n">ElementName</span> <span class="n">name</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ElementName</span><span class="p">(</span><span class="n">remote_device_id</span><span class="p">,</span> <span class="s2">&quot;com.huawei.remote_package_name&quot;</span><span class="p">,</span> <span class="s2">&quot;remote_class_name&quot;</span><span class="p">);</span>
<span class="n">want</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="n">name</span><span class="p">);</span> <span class="o">//</span> <span class="n">Add</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">target</span> <span class="n">FA</span> <span class="k">for</span> <span class="n">startup</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Want</span> <span class="n">instance</span><span class="o">.</span>
<span class="n">want</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">Want</span><span class="o">.</span><span class="n">FLAG_ABILITYSLICE_MULTI_DEVICE</span><span class="p">);</span> <span class="o">//</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">multi</span><span class="o">-</span><span class="n">device</span> <span class="n">startup</span> <span class="n">flag</span><span class="o">.</span> <span class="n">If</span> <span class="n">this</span> <span class="n">flag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">,</span> <span class="n">remote</span> <span class="n">FA</span> <span class="n">startup</span> <span class="n">will</span> <span class="n">be</span> <span class="n">unavailable</span><span class="o">.</span>
<span class="n">startAbility</span><span class="p">(</span><span class="n">want</span><span class="p">);</span> <span class="o">//</span> <span class="n">Start</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">FA</span> <span class="n">based</span> <span class="n">on</span> <span class="n">the</span> <span class="n">want</span> <span class="n">parameter</span><span class="o">.</span> <span class="n">If</span> <span class="n">the</span> <span class="n">name</span> <span class="ow">and</span> <span class="nb">type</span> <span class="n">of</span> <span class="n">the</span> <span class="n">want</span> <span class="n">parameter</span> <span class="n">are</span> <span class="n">different</span> <span class="kn">from</span> <span class="nn">those</span> <span class="n">used</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">IDE</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="n">parameter</span> <span class="n">name</span> <span class="ow">and</span> <span class="nb">type</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">IDE</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/subsystems/distributed-remote-startup.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
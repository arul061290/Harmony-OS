
<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AbilityKit &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="abilitykit">
<h1>AbilityKit<a class="headerlink" href="#abilitykit" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2><strong>Overview</strong><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Provides ability-related functions, including ability lifecycle
callbacks and functions for connecting to or disconnecting from Particle
Abilities.</p>
<p>Abilities are classified into <a class="reference external" href="feature.md">Feature</a> Abilities and
Particle Abilities. <a class="reference external" href="feature.md">Feature</a> Abilities support the Page
template, and Particle Abilities support the <a class="reference external" href="service.md">Service</a>
template. An ability using the Page template is called a Page ability
for short and that using the <a class="reference external" href="service.md">Service</a> template is called
a <a class="reference external" href="service.md">Service</a> ability.</p>
<p><strong>Since:</strong></p>
<p>1.0</p>
<p><strong>Version:</strong></p>
<p>1.0</p>
</div>
<div class="section" id="summary">
<h2><strong>Summary</strong><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="files">
<h2>Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
<table><thead align="left"><tr id="row682506385084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p437511755084826"><p>File Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1811701959084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row695788423084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p149520577084826"><p>ability.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1057425132084826"><p>Declares ability-related functions, including ability lifecycle
callbacks and functions for connecting to or disconnecting from Particle
Abilities.</p>
</p></td></tr><tr id="row78293266084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p459262142084826"><p>ability_connection.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1107926653084826"><p>Declares callbacks to be invoked when a remote Service ability is
connected or disconnected.</p>
</p></td></tr><tr id="row906150925084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p86524253084826"><p>ability_context.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1283386691084826"><p>Declares functions for starting and stopping an ability.</p>
</p></td></tr><tr id="row2025487054084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p325116773084826"><p>ability_env.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1314289883084826"><p>Declares functions for obtaining information about the runtime
environment of the application to which the ability belongs, including
the bundle name, source code path, and data path.</p>
</p></td></tr><tr id="row1586899208084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p927954948084826"><p>ability_errors.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1595511687084826"><p>Declares error codes returned by ability management functions.</p>
</p></td></tr><tr id="row1028981383084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1877810552084826"><p>ability_event_handler.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1570920821084826"><p>Declares functions for performing operations during inter-thread
communication, including running and quitting the event loop of the
current thread and posting tasks to an asynchronous thread.</p>
</p></td></tr><tr id="row1811410565084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1652046073084826"><p>ability_loader.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p857449528084826"><p>Declares functions for registering the class names of Ability and
AbilitySlice with the ability management framework.</p>
</p></td></tr><tr id="row1092610545084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1332616133084826"><p>ability_manager.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1513323168084826"><p>Declares ability-related functions, including functions for starting,
stopping, connecting to, and disconnecting from an ability, registering
a callback, and unregistering a callback.</p>
</p></td></tr><tr id="row359456009084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1457176477084826"><p>ability_slice.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1188978306084826"><p>Declares ability slice-related functions, including ability slice
lifecycle callbacks and functions for connecting to or disconnecting
from ability slices.</p>
</p></td></tr><tr id="row229023428084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p635449979084826"><p>ability_state.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p450055606084826"><p>Declares ability-related functions, including ability lifecycle
callbacks and functions for connecting to or disconnecting from Particle
Abilities. As the fundamental unit of OpenHarmony applications,
abilities are classified into Feature Abilities and Particle Abilities.
Feature Abilities support the Page template, and Particle Abilities
support the Service template. An ability using the Page template is
called a Page ability for short and that using the Service template is
called a Service ability.</p>
</p></td></tr><tr id="row1126022793084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1197102033084826"><p>want.h</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p58596940084826"><p>Declares the structure that provides abstract description of the
operation to be performed, including the ability information and the
carried data, and functions for setting data in the structure.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="data-structures">
<h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<table><thead align="left"><tr id="row1915529785084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1470170846084826"><p>Data Structure Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p187987864084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row333365679084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p260607733084826"><p>OHOS::Ability</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1593988899084826"><p>Declares ability-related functions, including ability lifecycle
callbacks and functions for connecting to or disconnecting from Particle
Abilities.</p>
</p></td></tr><tr id="row160371709084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1686903509084826"><p>IAbilityConnection</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1120723653084826"><p>Provides callbacks to be invoked when a remote Service ability is
connected or disconnected.</p>
</p></td></tr><tr id="row154603181084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1663909876084826"><p>OHOS::AbilityContext</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p432553166084826"><p>Provides functions for starting and stopping an ability.</p>
</p></td></tr><tr id="row835366184084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2032310325084826"><p>OHOS::AbilityEventHandler</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1532677325084826"><p>Declares functions for performing operations during inter-thread
communication, including running and quitting the event loop of the
current thread and posting tasks to an asynchronous thread.</p>
</p></td></tr><tr id="row98658998084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p509277445084826"><p>OHOS::AbilityLoader</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1199679902084826"><p>Declares functions for registering the class names of Ability and
AbilitySlice with the ability management framework.</p>
</p></td></tr><tr id="row422186675084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1678115560084826"><p>OHOS::AbilitySlice</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p33415605084826"><p>Provides ability slice-related functions, including ability slice
lifecycle callbacks and functions for connecting to or disconnecting
from ability slices.</p>
</p></td></tr><tr id="row2119891640084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2708633084826"><p>Want</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p371816199084826"><p>Defines the abstract description of an operation, including information
about the ability and the extra data to carry.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="macros">
<h2>Macros<a class="headerlink" href="#macros" title="Permalink to this headline">¶</a></h2>
<table><thead align="left"><tr id="row1769615134084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p219966494084826"><p>Macro Name and Value</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p647676814084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row644301737084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1596850586084826"><p>REGISTER_AA(className)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p719239067084826"><p>Registers the class name of an Ability child class.</p>
</p></td></tr><tr id="row2015357167084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1344588669084826"><p>REGISTER_AS(className)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1413417073084826"><p>Registers the class name of an AbilitySlice child class.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="enumerations">
<h2>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this headline">¶</a></h2>
<table><thead align="left"><tr id="row1822962985084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1762495587084826"><p>Enumeration Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p898508991084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row2125681440084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p610278971084826"><p>{ ERR_OK = 0, PARAM_NULL_ERROR, MEMORY_MALLOC_ERROR,
DUMP_ABILITIES_ERROR, IPC_REQUEST_ERROR, SERIALIZE_ERROR, COMMAND_ERROR
= 0x7fff }</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1361039995084826"><p>Declares error codes returned by ability management functions.</p>
</p></td></tr><tr id="row243411662084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p917221280084826"><p>State { STATE_UNINITIALIZED, STATE_INITIAL, STATE_INACTIVE,
STATE_ACTIVE, STATE_BACKGROUND }</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1730594498084826"><p>Enumerates all lifecycle states that an ability will go through over the
course of its lifetime.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<table><thead align="left"><tr id="row1295982960084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p992159363084826"><p>Function Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p2088696987084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1852674362084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1709322972084826"><p>OHOS::Ability::OnStart (const Want &amp;want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p551051740084826"><p>virtual void</p>
</p><p id="p102305890084826"><p>Called when this ability is started. You must override this function if
you want to perform some initialization operations during ability
startup.</p>
</p></td></tr><tr id="row1876990348084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1935900478084826"><p>OHOS::Ability::OnInactive ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p2012742851084826"><p>virtual void</p>
</p><p id="p1701083518084826"><p>Called when this ability enters the STATE_INACTIVE state.</p>
</p></td></tr><tr id="row266334173084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p954540438084826"><p>OHOS::Ability::OnActive (const Want &amp;want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1670139456084826"><p>virtual void</p>
</p><p id="p357716365084826"><p>Called when this ability enters the STATE_ACTIVE state.</p>
</p></td></tr><tr id="row335289907084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p416927441084826"><p>OHOS::Ability::OnBackground ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1265439534084826"><p>virtual void</p>
</p><p id="p405243174084826"><p>Called when this ability enters the STATE_BACKGROUND state.</p>
</p></td></tr><tr id="row141328699084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p987394380084826"><p>OHOS::Ability::OnStop ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1068230111084826"><p>virtual void</p>
</p><p id="p1713253784084826"><p>Called when this ability enters the STATE_STOP state.</p>
</p></td></tr><tr id="row24276794084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1939128052084826"><p>OHOS::Ability::OnConnect (const Want &amp;want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p986140165084826"><p>virtual const SvcIdentity *</p>
</p><p id="p667294227084826"><p>Called when this Service ability is connected for the first time.</p>
</p></td></tr><tr id="row991109123084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1363471228084826"><p>OHOS::Ability::OnDisconnect (const Want &amp;want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p923817086084826"><p>virtual void</p>
</p><p id="p1037110448084826"><p>Called when all abilities connected to this Service ability are
disconnected.</p>
</p></td></tr><tr id="row787619568084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1872558517084826"><p>OHOS::Ability::SetMainRoute (const std::string &amp;entry)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p731414156084826"><p>void</p>
</p><p id="p1748176623084826"><p>Sets the main route for this ability.</p>
</p></td></tr><tr id="row37156315084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1678353557084826"><p>OHOS::Ability::SetUIContent (RootView *rootView)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p776608318084826"><p>void</p>
</p><p id="p1216706333084826"><p>Sets the UI layout for this ability. You can call GetWindowRootView() to
create a layout and add controls.</p>
</p></td></tr><tr id="row218594545084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p464916870084826"><p>OHOS::Ability::MsgHandle (uint32_t funcId, IpcIo <em>request,
IpcIo</em>reply)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1323252736084826"><p>virtual void</p>
</p><p id="p610619120084826"><p>Handles a message sent by the client to this Service ability.</p>
</p></td></tr><tr id="row502831346084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1188886391084826"><p>OHOS::Ability::Dump (const std::string &amp;extra)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p142564647084826"><p>virtual void</p>
</p><p id="p1573360053084826"><p>Prints ability information to the console.</p>
</p></td></tr><tr id="row1164569676084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1983790527084826"><p>OHOS::AbilityContext::StartAbility (const Want &amp;want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p650507759084826"><p>int</p>
</p><p id="p1862089690084826"><p>Starts an Ability based on the specified Want information.</p>
</p></td></tr><tr id="row751573235084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2051669371084826"><p>OHOS::AbilityContext::StopAbility (const Want &amp;want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p593724019084826"><p>int</p>
</p><p id="p1970600528084826"><p>Stops an Ability based on the specified Want information.</p>
</p></td></tr><tr id="row502760368084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1587109232084826"><p>OHOS::AbilityContext::TerminateAbility ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p794160501084826"><p>int</p>
</p><p id="p2089985039084826"><p>Destroys this Ability.</p>
</p></td></tr><tr id="row537420540084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p85426800084826"><p>OHOS::AbilityContext::ConnectAbility (const Want &amp;want, const
IAbilityConnection &amp;conn, void *data)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1798390949084826"><p>int</p>
</p><p id="p825031128084826"><p>Connects to a Service ability based on the specified Want information.</p>
</p></td></tr><tr id="row318774616084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1935276695084826"><p>OHOS::AbilityContext::DisconnectAbility (const IAbilityConnection &amp;conn)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p784998007084826"><p>int</p>
</p><p id="p833849980084826"><p>Disconnects from a Service ability.</p>
</p></td></tr><tr id="row879691540084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1446732982084826"><p>GetBundleName ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1906886882084826"><p>const char *</p>
</p><p id="p1534122358084826"><p>Obtains the bundle name of the application to which this ability
belongs.</p>
</p></td></tr><tr id="row280903984084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p102414646084826"><p>GetSrcPath ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1898952048084826"><p>const char *</p>
</p><p id="p2028227380084826"><p>Obtains the source code path of this ability.</p>
</p></td></tr><tr id="row194058941084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p687843307084826"><p>GetDataPath ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1195516737084826"><p>const char *</p>
</p><p id="p1129325260084826"><p>Obtains the data path of this ability.</p>
</p></td></tr><tr id="row361931267084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p611289150084826"><p>OHOS::AbilityEventHandler::Run ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1673046067084826"><p>void</p>
</p><p id="p1051007477084826"><p>Starts running the event loop of the current thread.</p>
</p></td></tr><tr id="row1866519490084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1998341919084826"><p>OHOS::AbilityEventHandler::PostTask (const Task &amp;task)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1141145190084826"><p>void</p>
</p><p id="p543848956084826"><p>Posts a task to an asynchronous thread.</p>
</p></td></tr><tr id="row89371309084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p778215807084826"><p>OHOS::AbilityEventHandler::PostQuit ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p236025897084826"><p>void</p>
</p><p id="p1233755306084826"><p>Quits the event loop of the current thread.</p>
</p></td></tr><tr id="row2011747835084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p309650610084826"><p>OHOS::AbilityEventHandler::GetCurrentHandler ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p641320528084826"><p>static AbilityEventHandler *</p>
</p><p id="p1076763691084826"><p>Obtains the event handler of the current thread.</p>
</p></td></tr><tr id="row759555782084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2039669508084826"><p>StartAbility (const Want *want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1999949620084826"><p>int</p>
</p><p id="p1291536613084826"><p>Starts an ability based on the specified Want information.</p>
</p></td></tr><tr id="row1127862320084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1601019297084826"><p>StopAbility (const Want *want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p858372684084826"><p>int</p>
</p><p id="p807741003084826"><p>Stops an ability based on the specified Want information.</p>
</p></td></tr><tr id="row1085815641084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2023470994084826"><p>ConnectAbility (const Want <em>want, const IAbilityConnection</em>conn, void
*data)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p944813616084826"><p>int</p>
</p><p id="p623549456084826"><p>Connects to a Service ability based on the specified Want information.</p>
</p></td></tr><tr id="row1811707256084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p52091808084826"><p>DisconnectAbility (const IAbilityConnection *conn)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p897268242084826"><p>int</p>
</p><p id="p94956509084826"><p>Disconnects from a Service ability.</p>
</p></td></tr><tr id="row141545836084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p387334636084826"><p>OHOS::AbilitySlice::OnStart (const Want &amp;want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p2092756129084826"><p>virtual void</p>
</p><p id="p2076998981084826"><p>Called when this ability slice is started. You must override this
function if you want to perform some initialization operations during
ability slice startup.</p>
</p></td></tr><tr id="row1755120161084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p935920105084826"><p>OHOS::AbilitySlice::OnInactive ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1270742156084826"><p>virtual void</p>
</p><p id="p127260684084826"><p>Called when this ability slice enters the STATE_INACTIVE state.</p>
</p></td></tr><tr id="row1255287785084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p709764363084826"><p>OHOS::AbilitySlice::OnActive (const Want &amp;want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1501093131084826"><p>virtual void</p>
</p><p id="p745201654084826"><p>Called when this ability slice enters the STATE_ACTIVE state.</p>
</p></td></tr><tr id="row514390883084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1149260715084826"><p>OHOS::AbilitySlice::OnBackground ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p78393522084826"><p>virtual void</p>
</p><p id="p1247859302084826"><p>Called when this ability slice enters the STATE_BACKGROUND state.</p>
</p></td></tr><tr id="row896730358084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1837537345084826"><p>OHOS::AbilitySlice::OnStop ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p526331905084826"><p>virtual void</p>
</p><p id="p344435690084826"><p>Called when this ability slice enters the STATE_STOP state.</p>
</p></td></tr><tr id="row1807150483084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2092208121084826"><p>OHOS::AbilitySlice::Present (AbilitySlice &amp;abilitySlice, const Want
&amp;want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p465433061084826"><p>void</p>
</p><p id="p430684497084826"><p>Presents another ability slice, which can be an ability slice that is
not started or an existing ability slice in the host ability.</p>
</p></td></tr><tr id="row1753248205084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p698748451084826"><p>OHOS::AbilitySlice::Terminate ()</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p459426083084826"><p>void</p>
</p><p id="p854786090084826"><p>Destroys this ability slice.</p>
</p></td></tr><tr id="row558726944084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p502101967084826"><p>OHOS::AbilitySlice::SetUIContent (RootView *rootView)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p141103960084826"><p>void</p>
</p><p id="p1918171636084826"><p>Sets the UI layout for the host ability of this ability slice.</p>
</p></td></tr><tr id="row174490230084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p2039154290084826"><p>ClearWant (Want *want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p265556677084826"><p>void</p>
</p><p id="p1624405791084826"><p>Clears the memory of a specified Want object.</p>
</p></td></tr><tr id="row711143342084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p376948082084826"><p>SetWantElement (Want *want, ElementName element)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1829268797084826"><p>bool</p>
</p><p id="p1403427084826"><p>Sets the element variable for a specified Want object.</p>
</p></td></tr><tr id="row1402833281084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1459846866084826"><p>SetWantData (Want <em>want, const void</em>data, uint16_t dataLength)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p285333855084826"><p>bool</p>
</p><p id="p379581519084826"><p>Sets data to carry in a specified Want object for starting a particular
ability.</p>
</p></td></tr><tr id="row1424001388084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p418634425084826"><p>SetWantSvcIdentity (Want *want, SvcIdentity sid)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p323391201084826"><p>bool</p>
</p><p id="p1012920675084826"><p>Sets the sid member variable for a specified Want object.</p>
</p></td></tr><tr id="row337623062084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p1782014997084826"><p>WantToUri (Want want)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1160931032084826"><p>const char *</p>
</p><p id="p1992001618084826"><p>Converts a specified Want object into a character string.</p>
</p></td></tr><tr id="row912505287084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p id="p55585929084826"><p>WantParseUri (const char *uri)</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1838093337084826"><p>Want *</p>
</p><p id="p680310441084826"><p>Converts a specified character string into a Want object.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="details">
<h2><strong>Details</strong><a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="macro-definition-documentation">
<h2><strong>Macro Definition Documentation</strong><a class="headerlink" href="#macro-definition-documentation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="register-aa">
<h2>REGISTER_AA<a class="headerlink" href="#register-aa" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define REGISTER_AA( className)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Values</span><span class="p">:</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">constructor</span><span class="p">))</span> <span class="n">void</span> <span class="n">RegisterAA</span><span class="c1">##className() { \</span>

 <span class="n">AbilityLoader</span><span class="p">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">.</span><span class="n">RegisterAbility</span><span class="p">(</span><span class="c1">#className, []()-&gt;Ability* { \</span>

 <span class="k">return</span> <span class="n">new</span> <span class="n">className</span><span class="p">;</span> \

 <span class="p">});</span> \

 <span class="p">}</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Registers the class name of an <strong>Ability</strong> child class.</p>
<p>After implementing your own <strong>Ability</strong> class, you should call this
function so that the ability management framework can create <strong>Ability</strong>
instances when loading your <strong>Ability</strong> class.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1323190368084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1858995974084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p724204665084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row121594805084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>className</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the Ability class name to register.</p>
</td></tr></tbody></table></div>
<div class="section" id="register-as">
<h2>REGISTER_AS<a class="headerlink" href="#register-as" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define REGISTER_AS( className)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Values</span><span class="p">:</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">constructor</span><span class="p">))</span> <span class="n">void</span> <span class="n">RegisterAS</span><span class="c1">##className() { \</span>

 <span class="n">AbilityLoader</span><span class="p">::</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">.</span><span class="n">RegisterAbilitySlice</span><span class="p">(</span><span class="c1">#className, []()-&gt;AbilitySlice* { \</span>

 <span class="k">return</span> <span class="n">new</span> <span class="n">className</span><span class="p">;</span> \

 <span class="p">});</span> \

 <span class="p">}</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Registers the class name of an <strong>AbilitySlice</strong> child class.</p>
<p>After implementing your own <strong>AbilitySlice</strong> class, you should call this
function so that the ability management framework can create
<strong>AbilitySlice</strong> instances when loading your <strong>AbilitySlice</strong> class.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row364951137084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1245290674084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p294982802084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row410633070084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>className</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the AbilitySlice class name to register.</p>
</td></tr></tbody></table></div>
<div class="section" id="enumeration-type-documentation">
<h2><strong>Enumeration Type Documentation</strong><a class="headerlink" href="#enumeration-type-documentation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="anonymous-enum">
<h2>anonymous enum<a class="headerlink" href="#anonymous-enum" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">anonymous</span> <span class="n">enum</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Declares error codes returned by ability management functions.</p>
<table><thead align="left"><tr id="row1409712056084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1889132472084826"><p>Enumerator</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p583588157084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row420510995084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>ERR_OK</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p460296708084826"><p>The function is successfully called.</p>
</p></td></tr><tr id="row655330575084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>PARAM_NULL_ERROR</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p667875312084826"><p>The parameter is null.</p>
</p></td></tr><tr id="row1172848270084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>MEMORY_MALLOC_ERROR</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1157898880084826"><p>Memory allocation error.</p>
</p></td></tr><tr id="row2103468729084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>DUMP_ABILITIES_ERROR</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1073545251084826"><p>An error occurred during the execution of the Dump function.</p>
</p></td></tr><tr id="row144473577084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>IPC_REQUEST_ERROR</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1714775496084826"><p>IPC request error.</p>
</p></td></tr><tr id="row1625120457084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>SERIALIZE_ERROR</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1318496554084826"><p>Serialization error.</p>
</p></td></tr><tr id="row1403863367084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>COMMAND_ERROR</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1294352256084826"><p>Command error.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="state">
<h2>State<a class="headerlink" href="#state" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">enum</span> <span class="p">[</span><span class="n">State</span><span class="p">](</span><span class="n">abilitykit</span><span class="o">.</span><span class="n">md</span><span class="c1">#ga5d74787dedbc4e11c1ab15bf487e61f8)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Enumerates all lifecycle states that an ability will go through over the
course of its lifetime.</p>
<table><thead align="left"><tr id="row989195496084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p44555629084826"><p>Enumerator</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p884429213084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row610264197084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>STATE_UNINITIALIZED</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1857045550084826"><p>Uninitialized state: An ability is in this state when it has not been
initialized after being created.</p>
</p></td></tr><tr id="row1547626527084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>STATE_INITIAL</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1943472071084826"><p>Initial state: An ability is in this state after it is initialized or
stopped.</p>
</p></td></tr><tr id="row1021214556084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>STATE_INACTIVE</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1678643098084826"><p>Inactive state: An ability is in this state when it is switched to the
foreground but is not interactive.</p>
</p></td></tr><tr id="row892018807084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>STATE_ACTIVE</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p1486519301084826"><p>Active state: An ability is in this state when it is switched to the
foreground and is interactive.</p>
</p></td></tr><tr id="row1571284603084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>STATE_BACKGROUND</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p id="p214708488084826"><p>Background state: An ability is in this state after it returns to the
background.</p>
</p></td></tr></tbody></table></div>
<div class="section" id="function-documentation">
<h2><strong>Function Documentation</strong><a class="headerlink" href="#function-documentation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="clearwant">
<h2>ClearWant()<a class="headerlink" href="#clearwant" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ClearWant</span> <span class="p">([</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Clears the memory of a specified <a class="reference external" href="want.md">Want</a> object.</p>
<p>After calling functions such as
<a class="reference external" href="abilitykit.md#ga65f4d2eab99497e496dcd493bd0d047e">SetWantElement</a>,
you should call this function to clear the memory.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row109519538084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p765186619084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1107990477084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1734568138084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the Want object whose memory is to be released.</p>
</td></tr></tbody></table></div>
<div class="section" id="connectability-1-2">
<h2>ConnectAbility() [1/2]<a class="headerlink" href="#connectability-1-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilityContext</span><span class="p">::</span><span class="n">ConnectAbility</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">want</span><span class="p">,</span> <span class="n">const</span> <span class="p">[</span><span class="n">IAbilityConnection</span><span class="p">](</span><span class="n">iabilityconnection</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">conn</span><span class="p">,</span> <span class="n">void</span> <span class="o">*</span> <span class="n">data</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Connects to a <a class="reference external" href="service.md">Service</a> ability based on the specified
<a class="reference external" href="want.md">Want</a> information.</p>
<p>After the <a class="reference external" href="service.md">Service</a> ability is connected, the
<a class="reference external" href="ohos-ability.md">Ability</a> Manager <a class="reference external" href="service.md">Service</a> invokes a
particular callback and returns the ID of the <a class="reference external" href="service.md">Service</a>
ability. The client can use this ID to communicate with the connected
<a class="reference external" href="service.md">Service</a> ability.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1183605625084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1572749253084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1506534041084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1100950139084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the Want structure containing information about
the Service ability to connect.</p>
</td></tr><tr id="row719962878084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>conn</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the callback to be invoked when the connection is successful.</p>
</td></tr><tr id="row1943619680084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>data</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the data to be passed to the callback.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if this function is successfully called; returns another
value otherwise.</p>
</div>
<div class="section" id="connectability-2-2">
<h2>ConnectAbility() [2/2]<a class="headerlink" href="#connectability-2-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">ConnectAbility</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">want</span><span class="p">,</span> <span class="n">const</span> <span class="p">[</span><span class="n">IAbilityConnection</span><span class="p">](</span><span class="n">iabilityconnection</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">conn</span><span class="p">,</span> <span class="n">void</span> <span class="o">*</span> <span class="n">data</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Connects to a <a class="reference external" href="service.md">Service</a> ability based on the specified
<a class="reference external" href="want.md">Want</a> information.</p>
<p>After the <a class="reference external" href="service.md">Service</a> ability is connected, the AMS invokes
the particular callback and returns the ID of the
<a class="reference external" href="service.md">Service</a> ability. The client can use this ID to
communicate with the connected <a class="reference external" href="service.md">Service</a> ability.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1250764545084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1825720735084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p2030283194084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row272791548084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the Want structure containing information about
the Service ability to connect.</p>
</td></tr><tr id="row141353901084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>conn</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the callback object when the Service ability is connected.</p>
</td></tr><tr id="row1895676717084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>data</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the data to be passed to the callback.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if this function is successfully called; returns another
value otherwise.</p>
</div>
<div class="section" id="disconnectability-1-2">
<h2>DisconnectAbility() [1/2]<a class="headerlink" href="#disconnectability-1-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilityContext</span><span class="p">::</span><span class="n">DisconnectAbility</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">IAbilityConnection</span><span class="p">](</span><span class="n">iabilityconnection</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Disconnects from a <a class="reference external" href="service.md">Service</a> ability.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1466332497084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1068843051084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1832928260084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1574061693084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>conn</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the callback to be invoked when the connection is successful.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if this function is successfully called; returns another
value otherwise.</p>
</div>
<div class="section" id="disconnectability-2-2">
<h2>DisconnectAbility() [2/2]<a class="headerlink" href="#disconnectability-2-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">DisconnectAbility</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">IAbilityConnection</span><span class="p">](</span><span class="n">iabilityconnection</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Disconnects from a <a class="reference external" href="service.md">Service</a> ability.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1249476211084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p723715600084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1216935478084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row563288504084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>conn</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the callback object when the Service ability is connected.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if this function is successfully called; returns another
value otherwise.</p>
</div>
<div class="section" id="dump">
<h2>Dump()<a class="headerlink" href="#dump" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">Dump</span> <span class="p">(</span><span class="n">const</span> <span class="n">std</span><span class="p">::</span><span class="n">string</span> <span class="o">&amp;</span> <span class="n">extra</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Prints ability information to the console.</p>
<p>You can override this function to obtain or print extra parameters.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1990562000084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1393393681084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1255706018084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1720399280084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>extra</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the extra parameter to be obtained or printed to the console.</p>
</td></tr></tbody></table></div>
<div class="section" id="getbundlename">
<h2>GetBundleName()<a class="headerlink" href="#getbundlename" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">GetBundleName</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Obtains the bundle name of the application to which this ability
belongs.</p>
<p><strong>Returns:</strong></p>
<p>Returns the pointer to the bundle name if the operation is successful;
returns a null pointer otherwise.</p>
</div>
<div class="section" id="getcurrenthandler">
<h2>GetCurrentHandler()<a class="headerlink" href="#getcurrenthandler" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">static</span> <span class="p">[</span><span class="n">AbilityEventHandler</span><span class="p">](</span><span class="n">ohos</span><span class="o">-</span><span class="n">abilityeventhandler</span><span class="o">.</span><span class="n">md</span><span class="p">)</span><span class="o">*</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilityEventHandler</span><span class="p">::</span><span class="n">GetCurrentHandler</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Obtains the event handler of the current thread.</p>
<p><strong>Returns:</strong></p>
<p>Returns the pointer to the
<a class="reference external" href="ohos-abilityeventhandler.md">AbilityEventHandler</a> object of the
current thread.</p>
</div>
<div class="section" id="getdatapath">
<h2>GetDataPath()<a class="headerlink" href="#getdatapath" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">GetDataPath</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Obtains the data path of this ability.</p>
<p><strong>Returns:</strong></p>
<p>Returns the pointer to the data path of this ability.</p>
</div>
<div class="section" id="getsrcpath">
<h2>GetSrcPath()<a class="headerlink" href="#getsrcpath" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">GetSrcPath</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Obtains the source code path of this ability.</p>
<p><strong>Returns:</strong></p>
<p>Returns the pointer to the source code path of this ability.</p>
</div>
<div class="section" id="msghandle">
<h2>MsgHandle()<a class="headerlink" href="#msghandle" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">MsgHandle</span> <span class="p">(</span><span class="n">uint32_t</span> <span class="n">funcId</span><span class="p">,</span> <span class="n">IpcIo</span> <span class="o">*</span> <span class="n">request</span><span class="p">,</span> <span class="n">IpcIo</span> <span class="o">*</span> <span class="n">reply</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Handles a message sent by the client to this <a class="reference external" href="service.md">Service</a>
ability.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row46417640084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p255008973084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p326004179084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row979348565084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>funcId</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the type of the message sent by the client.</p>
</td></tr><tr id="row984641626084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>request</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the serialized request parameters sent by the
client.</p>
</td></tr><tr id="row360720208084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>reply</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the serialized result returned to the client.</p>
</td></tr></tbody></table></div>
<div class="section" id="onactive-1-2">
<h2>OnActive() [1/2]<a class="headerlink" href="#onactive-1-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilitySlice</span><span class="p">::</span><span class="n">OnActive</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this ability slice enters the <strong>STATE_ACTIVE</strong> state.</p>
<p>The ability slice in the <strong>STATE_ACTIVE</strong> state is visible and has
focus. You can override this function to implement your own processing
logic.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row613808386084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p226729612084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p734696491084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row75414449084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the Want structure containing activation information about the
ability slice.</p>
</td></tr></tbody></table></div>
<div class="section" id="onactive-2-2">
<h2>OnActive() [2/2]<a class="headerlink" href="#onactive-2-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">OnActive</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this ability enters the <strong>STATE_ACTIVE</strong> state.</p>
<p>The ability in the <strong>STATE_ACTIVE</strong> state is visible and has focus. You
can override this function to implement your own processing logic.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row2074210916084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p920763233084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p605465239084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1557777390084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the Want structure containing activation information about the
ability.</p>
</td></tr></tbody></table></div>
<div class="section" id="onbackground-1-2">
<h2>OnBackground() [1/2]<a class="headerlink" href="#onbackground-1-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilitySlice</span><span class="p">::</span><span class="n">OnBackground</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this ability slice enters the <strong>STATE_BACKGROUND</strong> state.</p>
<p>The ability slice in the <strong>STATE_BACKGROUND</strong> state is invisible. You
can override this function to implement your own processing logic.</p>
</div>
<div class="section" id="onbackground-2-2">
<h2>OnBackground() [2/2]<a class="headerlink" href="#onbackground-2-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">OnBackground</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this ability enters the <strong>STATE_BACKGROUND</strong> state.</p>
<p>The ability in the <strong>STATE_BACKGROUND</strong> state is invisible. You can
override this function to implement your own processing logic.</p>
</div>
<div class="section" id="onconnect">
<h2>OnConnect()<a class="headerlink" href="#onconnect" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">const</span> <span class="n">SvcIdentity</span><span class="o">*</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">OnConnect</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this <a class="reference external" href="service.md">Service</a> ability is connected for the
first time.</p>
<p>You can override this function to implement your own processing logic.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row42580261084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p44731320084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p478438402084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row2074257973084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the Want structure containing connection information about the
Service ability.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns a pointer to the <strong>sid</strong> of the connected
<a class="reference external" href="service.md">Service</a> ability.</p>
</div>
<div class="section" id="ondisconnect">
<h2>OnDisconnect()<a class="headerlink" href="#ondisconnect" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">OnDisconnect</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when all abilities connected to this <a class="reference external" href="service.md">Service</a>
ability are disconnected.</p>
<p>You can override this function to implement your own processing logic.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row894791778084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p355669002084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1195991113084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row295781002084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the Want structure containing disconnection information about
the Service ability.</p>
</td></tr></tbody></table></div>
<div class="section" id="oninactive-1-2">
<h2>OnInactive() [1/2]<a class="headerlink" href="#oninactive-1-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilitySlice</span><span class="p">::</span><span class="n">OnInactive</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this ability slice enters the <strong>STATE_INACTIVE</strong> state.</p>
<p><strong>STATE_INACTIVE</strong> is an instantaneous state. The ability slice in this
state may be visible but does not have focus. You can override this
function to implement your own processing logic.</p>
</div>
<div class="section" id="oninactive-2-2">
<h2>OnInactive() [2/2]<a class="headerlink" href="#oninactive-2-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">OnInactive</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this ability enters the <strong>STATE_INACTIVE</strong> state.</p>
<p><strong>STATE_INACTIVE</strong> is an instantaneous state. The ability in this state
may be visible but does not have focus. You can override this function
to implement your own processing logic.</p>
</div>
<div class="section" id="onstart-1-2">
<h2>OnStart() [1/2]<a class="headerlink" href="#onstart-1-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilitySlice</span><span class="p">::</span><span class="n">OnStart</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this ability slice is started. You must override this
function if you want to perform some initialization operations during
ability slice startup.</p>
<p>This function can be called only once in the entire lifecycle of an
ability slice. You can override this function to implement your own
processing logic.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1248988080084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p921013983084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p28150133084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1818781738084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the Want structure containing startup information about the
ability slice.</p>
</td></tr></tbody></table></div>
<div class="section" id="onstart-2-2">
<h2>OnStart() [2/2]<a class="headerlink" href="#onstart-2-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">OnStart</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this ability is started. You must override this function if
you want to perform some initialization operations during ability
startup.</p>
<p>This function can be called only once in the entire lifecycle of an
ability.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1099520288084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1537916566084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1552361685084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row25918164084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the Want structure containing startup information about the
ability.</p>
</td></tr></tbody></table></div>
<div class="section" id="onstop-1-2">
<h2>OnStop() [1/2]<a class="headerlink" href="#onstop-1-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilitySlice</span><span class="p">::</span><span class="n">OnStop</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this ability slice enters the <strong>STATE_STOP</strong> state.</p>
<p>The ability slice in the <strong>STATE_STOP</strong> state is being destroyed. You
can override this function to implement your own processing logic.</p>
</div>
<div class="section" id="onstop-2-2">
<h2>OnStop() [2/2]<a class="headerlink" href="#onstop-2-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtual</span> <span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">OnStop</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when this ability enters the <strong>STATE_STOP</strong> state.</p>
<p>The ability in the <strong>STATE_STOP</strong> is being destroyed. You can override
this function to implement your own processing logic.</p>
</div>
<div class="section" id="posttask">
<h2>PostTask()<a class="headerlink" href="#posttask" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilityEventHandler</span><span class="p">::</span><span class="n">PostTask</span> <span class="p">(</span><span class="n">const</span> <span class="n">Task</span> <span class="o">&amp;</span> <span class="n">task</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Posts a task to an asynchronous thread.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row2119782823084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p924389977084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1459797179084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row426722068084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>task</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the task to post.</p>
</td></tr></tbody></table></div>
<div class="section" id="present">
<h2>Present()<a class="headerlink" href="#present" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilitySlice</span><span class="p">::</span><span class="n">Present</span> <span class="p">([</span><span class="n">AbilitySlice</span><span class="p">](</span><span class="n">ohos</span><span class="o">-</span><span class="n">abilityslice</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">abilitySlice</span><span class="p">,</span> <span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">want</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Presents another ability slice, which can be an ability slice that is
not started or an existing ability slice in the host ability.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row390258325084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1446805221084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p378587379084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row479106266084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>abilitySlice</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the target ability slice. This parameter cannot be null.</p>
</td></tr><tr id="row1142102340084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the Want structure containing startup information about the
target ability slice.</p>
</td></tr></tbody></table><p><strong>Attention:</strong></p>
<p>This function can be called only when both of the following conditions
are met:</p>
<ul class="simple">
<li><p>The host ability is in the <strong>STATE_ACTIVE</strong> state.</p></li>
<li><p>The target ability slice is not started or destroyed.</p></li>
</ul>
</div>
<div class="section" id="setmainroute">
<h2>SetMainRoute()<a class="headerlink" href="#setmainroute" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">SetMainRoute</span> <span class="p">(</span><span class="n">const</span> <span class="n">std</span><span class="p">::</span><span class="n">string</span> <span class="o">&amp;</span> <span class="n">entry</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Sets the main route for this ability.</p>
<p>The main route, also called main entry, refers to the default
<a class="reference external" href="ohos-abilityslice.md">AbilitySlice</a> to present for this ability.
This function should be called only on <a class="reference external" href="feature.md">Feature</a>
Abilities. If this function is not called in the <a class="reference external" href="abilitykit.md#ga4d016d42397f33c7710db8544581c757">OnStart(const Want
&amp;want)</a> function
for a <a class="reference external" href="feature.md">Feature</a> <a class="reference external" href="ohos-ability.md">Ability</a>, the
<a class="reference external" href="feature.md">Feature</a> <a class="reference external" href="ohos-ability.md">Ability</a> will fail to
start.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row122852329084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1884864326084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1829252446084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row991575334084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>entry</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the main entry, which is the class name of the AbilitySlice
instance to start.</p>
</td></tr></tbody></table></div>
<div class="section" id="setuicontent-1-2">
<h2>SetUIContent() [1/2]<a class="headerlink" href="#setuicontent-1-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilitySlice</span><span class="p">::</span><span class="n">SetUIContent</span> <span class="p">([</span><span class="n">RootView</span><span class="p">](</span><span class="n">ohos</span><span class="o">-</span><span class="n">rootview</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">rootView</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Sets the UI layout for the host ability of this ability slice.</p>
<p>You can call <strong>GetWindowRootView()</strong> to create a layout and add
controls.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1601581194084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1674940809084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1228646333084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row214566105084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>rootView</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the custom layout view you have created.</p>
</td></tr></tbody></table></div>
<div class="section" id="setuicontent-2-2">
<h2>SetUIContent() [2/2]<a class="headerlink" href="#setuicontent-2-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">Ability</span><span class="p">::</span><span class="n">SetUIContent</span> <span class="p">([</span><span class="n">RootView</span><span class="p">](</span><span class="n">ohos</span><span class="o">-</span><span class="n">rootview</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">rootView</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Sets the UI layout for this ability. You can call
<strong>GetWindowRootView()</strong> to create a layout and add controls.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row820835500084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1895746812084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1913918789084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1440265219084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>rootView</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the custom layout view you have created.</p>
</td></tr></tbody></table></div>
<div class="section" id="setwantdata">
<h2>SetWantData()<a class="headerlink" href="#setwantdata" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span> <span class="n">SetWantData</span> <span class="p">([</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">want</span><span class="p">,</span> <span class="n">const</span> <span class="n">void</span> <span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="n">uint16_t</span> <span class="n">dataLength</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Sets data to carry in a specified <a class="reference external" href="want.md">Want</a> object for starting
a particular ability.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row889715207084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p711274391084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p60431617084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1648451259084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the Want object to set.</p>
</td></tr><tr id="row919468022084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>data</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the data to set.</p>
</td></tr><tr id="row1004180691084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>dataLength</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the data length to set. The length must be the same as that of
the data specified in data.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>true</strong> if the setting is successful; returns <strong>false</strong>
otherwise.</p>
</div>
<div class="section" id="setwantelement">
<h2>SetWantElement()<a class="headerlink" href="#setwantelement" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span> <span class="n">SetWantElement</span> <span class="p">([</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">want</span><span class="p">,</span> <span class="p">[</span><span class="n">ElementName</span><span class="p">](</span><span class="n">elementname</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="n">element</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Sets the <strong>element</strong> variable for a specified <a class="reference external" href="want.md">Want</a> object.</p>
<p>To start a specified ability, you should call this function to set the
<a class="reference external" href="elementname.md">ElementName</a> required for starting the ability.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row2140412967084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p268842212084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p328716582084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1065041189084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the Want object to set.</p>
</td></tr><tr id="row1194824114084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>element</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the ElementName containing information required for starting
the ability.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>true</strong> if the setting is successful; returns <strong>false</strong>
otherwise.</p>
</div>
<div class="section" id="setwantsvcidentity">
<h2>SetWantSvcIdentity()<a class="headerlink" href="#setwantsvcidentity" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span> <span class="n">SetWantSvcIdentity</span> <span class="p">([</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">want</span><span class="p">,</span> <span class="n">SvcIdentity</span> <span class="n">sid</span> <span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Sets the <strong>sid</strong> member variable for a specified <a class="reference external" href="want.md">Want</a>
object.</p>
<p>When starting an ability, you should call this function to set an
<strong>SvcIdentity</strong> object if a callback needs to be invoked after the
ability is started successfully.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1591334474084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1397106141084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1584519936084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1942996133084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the Want object to set.</p>
</td></tr><tr id="row685518785084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>sid</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the SvcIdentity object to set.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>true</strong> if the setting is successful; returns <strong>false</strong>
otherwise.</p>
</div>
<div class="section" id="startability-1-2">
<h2>StartAbility() [1/2]<a class="headerlink" href="#startability-1-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilityContext</span><span class="p">::</span><span class="n">StartAbility</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Starts an <a class="reference external" href="ohos-ability.md">Ability</a> based on the specified
<a class="reference external" href="want.md">Want</a> information.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row51153604084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1248899895084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1474436812084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row271327458084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the Want structure containing information about
the ability to start.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if the operation is successful; returns a non-zero value
otherwise.</p>
</div>
<div class="section" id="startability-2-2">
<h2>StartAbility() [2/2]<a class="headerlink" href="#startability-2-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">StartAbility</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Starts an ability based on the specified <a class="reference external" href="want.md">Want</a> information.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row505881632084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p277017768084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p128989750084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row782986196084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the Want structure containing information about
the ability to start.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if this function is successfully called; returns another
value otherwise.</p>
</div>
<div class="section" id="stopability-1-2">
<h2>StopAbility() [1/2]<a class="headerlink" href="#stopability-1-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilityContext</span><span class="p">::</span><span class="n">StopAbility</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Stops an <a class="reference external" href="ohos-ability.md">Ability</a> based on the specified
<a class="reference external" href="want.md">Want</a> information.</p>
<p>This function takes effect only on <a class="reference external" href="service.md">Service</a> abilities.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row2066735937084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p2124423487084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p289943859084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1683193855084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the Want structure containing information about
the ability to stop.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if the operation is successful; returns a non-zero value
otherwise.</p>
</div>
<div class="section" id="stopability-2-2">
<h2>StopAbility() [2/2]<a class="headerlink" href="#stopability-2-2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">StopAbility</span> <span class="p">(</span><span class="n">const</span> <span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Stops an ability based on the specified <a class="reference external" href="want.md">Want</a> information.</p>
<p>This function takes effect only on <a class="reference external" href="service.md">Service</a> abilities.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1922228483084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1140583862084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p265735715084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row234675245084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the Want structure containing information about
the ability to stop.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if this function is successfully called; returns another
value otherwise.</p>
</div>
<div class="section" id="terminate">
<h2>Terminate()<a class="headerlink" href="#terminate" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilitySlice</span><span class="p">::</span><span class="n">Terminate</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Destroys this ability slice.</p>
<p>This ability slice can call this function to destroy itself. If the
ability slice to destroy is the only running one in the host ability,
the host ability will also be destroyed. Otherwise, the host ability
will not be affected.</p>
</div>
<div class="section" id="terminateability">
<h2>TerminateAbility()<a class="headerlink" href="#terminateability" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">OHOS</span><span class="p">::</span><span class="n">AbilityContext</span><span class="p">::</span><span class="n">TerminateAbility</span> <span class="p">()</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Destroys this <a class="reference external" href="ohos-ability.md">Ability</a>.</p>
<p>This function can be called only by this ability.</p>
<p><strong>Returns:</strong></p>
<p>Returns <strong>0</strong> if the operation is successful; returns <strong>-1</strong> otherwise.</p>
</div>
<div class="section" id="wantparseuri">
<h2>WantParseUri()<a class="headerlink" href="#wantparseuri" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span><span class="o">*</span> <span class="n">WantParseUri</span> <span class="p">(</span><span class="n">const</span> <span class="n">char</span> <span class="o">*</span> <span class="n">uri</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Converts a specified character string into a <a class="reference external" href="want.md">Want</a> object.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1104318665084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p1885381001084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1324622337084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1647357916084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>uri</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the character string to convert.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns the pointer to the converted <a class="reference external" href="want.md">Want</a> object if the
operation is successful; returns <strong>nullptr</strong> otherwise.</p>
</div>
<div class="section" id="wanttouri">
<h2>WantToUri()<a class="headerlink" href="#wanttouri" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">char</span><span class="o">*</span> <span class="n">WantToUri</span> <span class="p">([</span><span class="n">Want</span><span class="p">](</span><span class="n">want</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="n">want</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Converts a specified <a class="reference external" href="want.md">Want</a> object into a character string.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row1384003424084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p218605391084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1512458671084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row2117893746084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>want</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the Want object to convert.</p>
</td></tr></tbody></table><p><strong>Returns:</strong></p>
<p>Returns the converted character string if the operation is successful;
returns <strong>nullptr</strong> otherwise.</p>
</div>
<div class="section" id="variable-documentation">
<h2><strong>Variable Documentation</strong><a class="headerlink" href="#variable-documentation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="onabilityconnectdone">
<h2>OnAbilityConnectDone<a class="headerlink" href="#onabilityconnectdone" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span><span class="p">(</span><span class="o">*</span> <span class="n">IAbilityConnection</span><span class="p">::</span><span class="n">OnAbilityConnectDone</span><span class="p">)</span> <span class="p">([</span><span class="n">ElementName</span><span class="p">](</span><span class="n">elementname</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span><span class="n">elementName</span><span class="p">,</span> <span class="n">SvcIdentity</span> <span class="o">*</span><span class="n">serviceSid</span><span class="p">,</span> <span class="nb">int</span> <span class="n">resultCode</span><span class="p">,</span> <span class="n">void</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called when a client is connected to a <a class="reference external" href="service.md">Service</a> ability.</p>
<p>This callback is invoked to receive the connection result after a client
is connected to a <a class="reference external" href="service.md">Service</a> ability.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row2063992169084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p623143633084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p1482129589084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row649098413084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>elementName</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the information about the connected Service
ability.</p>
</td></tr><tr id="row2030545530084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>serviceSid</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the remote proxy object of the Service ability.</p>
</td></tr><tr id="row416533819084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>resultCode</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the connection result code. The value 0 indicates a successful
connection, and any other value indicates a connection failure.</p>
</td></tr><tr id="row2055112374084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>data</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the data stored during the connection.</p>
</td></tr></tbody></table></div>
<div class="section" id="onabilitydisconnectdone">
<h2>OnAbilityDisconnectDone<a class="headerlink" href="#onabilitydisconnectdone" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span><span class="p">(</span><span class="o">*</span> <span class="n">IAbilityConnection</span><span class="p">::</span><span class="n">OnAbilityDisconnectDone</span><span class="p">)</span> <span class="p">([</span><span class="n">ElementName</span><span class="p">](</span><span class="n">elementname</span><span class="o">.</span><span class="n">md</span><span class="p">)</span> <span class="o">*</span><span class="n">elementName</span><span class="p">,</span> <span class="nb">int</span> <span class="n">resultCode</span><span class="p">,</span> <span class="n">void</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Called after all connections to a <a class="reference external" href="service.md">Service</a> ability are
disconnected.</p>
<p>This callback is invoked to receive the disconnection result after the
connected <a class="reference external" href="service.md">Service</a> ability crashes or is killed. If the
<a class="reference external" href="service.md">Service</a> ability exits unexpectedly, all its connections
are disconnected, and each ability previously connected to it will call
<strong>OnAbilityDisconnectDone(ElementName *elementName, int resultCode,
void *data)</strong>.</p>
<p><strong>Parameters:</strong></p>
<table><thead align="left"><tr id="row349075666084826"><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.1"><p id="p391080385084826"><p>Name</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.1.3.1.2"><p id="p494853109084826"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row1769297326084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>elementName</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the information about the disconnected Service
ability.</p>
</td></tr><tr id="row1767884180084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>resultCode</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the disconnection result code. The value 0 indicates a
successful disconnection, and any other value indicates a disconnection
failure.</p>
</td></tr><tr id="row1318714727084826"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.1 "><p>data</p>
</td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.1.3.1.2 "><p>Indicates the pointer to the data stored during the connection.</p>
</td></tr></tbody></table></div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/api/api-SmartVision-Devices/abilitykit.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
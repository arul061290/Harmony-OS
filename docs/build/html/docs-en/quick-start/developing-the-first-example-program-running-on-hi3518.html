
<!DOCTYPE html>

<html lang="y">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Developing the First Example Program running on Hi3518 &#8212; Harmony 1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="developing-the-first-example-program-running-on-hi3518">
<h1>Developing the First Example Program running on Hi3518<a class="headerlink" href="#developing-the-first-example-program-running-on-hi3518" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to modify, compile, burn, and run the first
program on the board, and finally print <strong>Hello OHOS!</strong>.</p>
<div class="section" id="acquiring-source-code">
<h2>Acquiring Source Code<a class="headerlink" href="#acquiring-source-code" title="Permalink to this headline">¶</a></h2>
<p>You need to acquire <a class="reference external" href="https://repo.huaweicloud.com/harmonyos/os/1.0/code-1.0.tar.gz">Hi3518 source
code</a>
and download it on a Linux server. For details, see <a class="reference external" href="../get-code/source-code-acquisition.md">Source Code
Acquisition</a>.</p>
</div>
<div class="section" id="modifying-a-program">
<h2>Modifying a Program<a class="headerlink" href="#modifying-a-program" title="Permalink to this headline">¶</a></h2>
<p>The following example shows the <strong>helloworld.c</strong> code in the
<strong>applications/sample/camera/app/src</strong> directory. You can customize the
content to be printed. For example, you can change OHOS to World. You
can use either ISO C or C++ to develop a program.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;stdio.h&gt;</span>
<span class="c1">#include &quot;los_sample.h&quot;</span>

<span class="nb">int</span> <span class="n">main</span><span class="p">(</span><span class="nb">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">************************************************</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\t\t</span><span class="s2">Hello OHOS!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">************************************************</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">);</span>

    <span class="n">LOS_Sample</span><span class="p">(</span><span class="n">g_num</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="compiling-code">
<h2>Compiling Code<a class="headerlink" href="#compiling-code" title="Permalink to this headline">¶</a></h2>
<p>On the Linux server, access the root directory of the source code
package and run the following script to compile the source code package.
The result files are generated in the <strong>out/ipcamera_hi3518ev300</strong>
directory.</p>
<p>Hi3518EV300</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">build</span><span class="o">.</span><span class="n">py</span> <span class="n">ipcamera_hi3518ev300</span> <span class="o">-</span><span class="n">b</span> <span class="n">debug</span>
</pre></div>
</div>
</div>
<div class="section" id="burning-images">
<h2>Burning Images<a class="headerlink" href="#burning-images" title="Permalink to this headline">¶</a></h2>
<p>Burn images to the Hi3518EV300 board over the serial port.</p>
<ol class="arabic">
<li><p>Connect a serial cable (USB port) of the board to the Windows host
and start <strong>Device Manager</strong> to check whether the serial port number
is COM7.</p>
<blockquote>
<div><p><img alt="image1" src="../../_images/icon-notice3.gif" /> <strong>NOTICE:</strong> To update the USB-to-Serial driver, you need
to start <strong>Device Manager</strong>, right-click the device, and choose
<strong>Update Driver Software</strong> &gt; <strong>Search automatically for updated
driver software</strong>.</p>
</div></blockquote>
<div class="line-block">
<div class="line"><strong>Figure 1</strong> Successful driver installation</div>
<div class="line"><img alt="image2" src="../../_images/successful-driver-installation-2.png" /></div>
</div>
</li>
<li><p>Start the HiTool, select the <strong>Hi3518EV300</strong> chip, select <strong>COM7</strong>
for <strong>Local PC Config</strong>, and select <strong>Serial</strong> for <strong>Transfer Mode</strong>.</p>
<div class="line-block">
<div class="line"><strong>Figure 2</strong> Configuring the serial port on HiTool</div>
<div class="line"><img alt="image3" src="../../_images/configuring-the-serial-port-on-hitool.png" /></div>
</div>
</li>
<li><p>Burn the newly compiled <strong>OHOS_Image.bin</strong> file, <strong>rootfs.img</strong>, and
<strong>userfs.img</strong> files to the board. Ensure the file path, flash type,
burning start address, and burning length are correct. Modify
relevant parameters based on the file size. The value is rounded up,
in MB.</p>
<div class="line-block">
<div class="line"><strong>Figure 3</strong> Burning images using HiTool</div>
<div class="line"><img alt="image4" src="../../_images/burning-images-using-hitool.png" /></div>
</div>
</li>
<li><p>Click <strong>Burn</strong> and power on the board as required. (If the board is
powered on, power it off and then power it on.)</p>
<div class="line-block">
<div class="line"><strong>Figure 4</strong></div>
<div class="line"><img alt="image5" src="../../_images/en-us_image_0000001054219799.png" /></div>
</div>
</li>
<li><p>Click <strong>OK</strong>.</p>
<div class="line-block">
<div class="line"><strong>Figure 5</strong> Successful burning</div>
<div class="line"><img alt="image6" src="../../_images/successful-burning-3.png" /></div>
</div>
</li>
</ol>
</div>
<div class="section" id="running-an-image">
<h2>Running an Image<a class="headerlink" href="#running-an-image" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Connect to the serial port. After the images are burnt successfully,
start the terminal, click <strong>Settings</strong>, set <strong>View Title</strong> to
<strong>Terminal 11</strong> and <strong>Port</strong> to <strong>COM7</strong>, and click <strong>OK</strong> to open
the serial port. You have logged in to the U-boot if <strong>hisilicon #</strong>
is displayed.</p>
<div class="line-block">
<div class="line"><strong>Figure 6</strong> Serial port connection</div>
<div class="line"><img alt="image7" src="../../_images/serial-port-connection.png" /></div>
</div>
</li>
<li><p>(Mandatory for the first burning) Modify the <strong>bootcmd</strong> and
<strong>bootargs</strong> parameters of U-boot. This step is a fixed operation and
the result can be saved. However, you need to perform the following
steps again if U-boot needs to be reburnt.</p>
<p><strong>Table 1</strong> Parameters of the U-boot</p>
<table><thead align="left"><tr id="row193681920182219"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p3368202016229"><p>Command</p>
</p></th><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p936812052217"><p>Description</p>
</p></th></tr></thead><tbody><tr id="row10368142032210"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1636882092214"><p>setenv bootcmd “sf probe 0;sf read 0x40000000 0x100000 0x600000;go
0x40000000”;</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p17368202082213"><p>Run this command to set the content of bootcmd. Select the flash
whose number is 0, and read content that has a size of 0x600000 and a
start address of 0x100000 to memory address 0x40000000.</p>
</p></td></tr><tr id="row136814209227"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p234414019231"><p>setenv bootargs “console=ttyAMA0,115200n8 root=flash fstype=jffs2 rw
rootaddr=7 M rootsize=8 M”;</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p10368102010223"><p>In this command, bootargs is set to the serial port output, the baud
rate is 115200, the data bit is 8, and the rootfs is mounted to the
flash memory. The file system type is set to jffs2 rw, which provides
the read-write attribute for the JFFS2 file system. rootaddr=7 M
rootsize=8 M indicates the actual start address and length of the
rootfs.img file to be burnt, respectively. The size must be the same
as that of the compiled files in the HiTool.</p>
</p></td></tr><tr id="row2368120112219"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p20368142072217"><p>saveenv</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p19368102020220"><p>saveenv means to save the current configuration.</p>
</p></td></tr><tr id="row63689205220"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p3368162015223"><p>reset</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p23681820182217"><p>reset means to reset the board.</p>
</p></td></tr><tr id="row346253519253"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p16462113512251"><p>pri</p>
</p></td><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p3462335152514"><p>pri means to view the displayed parameters.</p>
</p></td></tr></tbody></table><blockquote>
<div><p><img alt="image8" src="../../_images/icon-notice3.gif" /> <strong>NOTICE:</strong> <strong>go 0x40000000</strong> (optional) indicates that
the command is fixed in the startup parameters by default and the
board automatically starts after it is reset. If you want to
manually start the board, press <strong>Enter</strong> in the countdown phase
of the U-boot startup to interrupt the automatic startup.</p>
</div></blockquote>
<div class="line-block">
<div class="line"><strong>Figure 7</strong> Startup parameter settings</div>
<div class="line"><img alt="image9" src="../../_images/startup-parameter-settings.png" /></div>
</div>
</li>
<li><p>If <strong>hisilicon #</strong> is displayed during the startup, run the <strong>reset</strong>
command. After the system automatically starts and <strong>OHOS</strong> is
displayed, run the <strong>./bin/camera_app</strong> command and then press
<strong>Enter</strong>. The system is started successfully if information shown in
the following figure is displayed.</p>
<div class="line-block">
<div class="line"><strong>Figure 8</strong> Successful system startup and program execution</div>
<div class="line"><img alt="image10" src="../../_images/successful-system-startup-and-program-execution.png" /></div>
</div>
</li>
</ol>
</div>
<div class="section" id="follow-up-learning">
<h2>Follow-up Learning<a class="headerlink" href="#follow-up-learning" title="Permalink to this headline">¶</a></h2>
<p>Congratulations! You have finished all steps! You are advised to go on
learning how to develop <a class="reference external" href="../guide/camera-control.md">Cameras with a
Screen</a>.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Harmony</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Arul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/docs-en/quick-start/developing-the-first-example-program-running-on-hi3518.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>